<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>⏳ Γωνία Σκέψης</title>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
<style>
  body {
    margin: 0;
    font-family: 'Quicksand', sans-serif;
    background: #f9f9f9;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    flex-direction: column;
    text-align: center;
  }
  h1 {
    font-size: 30px;
    margin-bottom: 20px;
    color: #333;
  }
  #timer {
    font-size: 50px;
    font-weight: bold;
    color: #e60000;
    margin-bottom: 20px;
  }
  button {
    margin-top: 10px;
    padding: 10px 20px;
    font-size: 18px;
    border-radius: 10px;
    border: none;
    background: #4CAF50;
    color: white;
    cursor: pointer;
  }
  button:hover { background: #45a049; }
  #stayAwakeBtn {
    background: #ff9933;
    margin-bottom: 20px;
  }
  #stayAwakeBtn:hover {
    background: #ff7700;
  }
</style>
</head>
<body>

<h1>⏳ Γωνία Σκέψης</h1>
<div id="timer">01:00</div>

<!-- ✅ Κουμπί να μη σβήσει η οθόνη -->
<button id="stayAwakeBtn" onclick="stayAwake()">☀️ Πάτα για να μη σβήσει η οθόνη</button>

<p id="instructions">Μην ακουμπήσεις τίποτα άλλο. Μη φύγεις από τη σελίδα. Μην κάνεις τίποτα μέχρι να τελειώσει ο χρόνος. Είσαι τιμωρία στη Γωνία Σκέψης. Σκέψου τι έκανες, τι έμαθες και πώς θα είσαι καλύτερος Μπόμπος.</p>

<script>
const TELEGRAM_TOKEN = "7932574102:AAFQvlNoBw2AWpRuHO7DWlBnRWyA1DhOGuE";
const CHAT_ID = "7336951445";

let timeLeft = 60; // 1 λεπτό = 60 δευτερόλεπτα
let timerInterval;

// ✅ Ξεκινάμε το χρονόμετρο
function startTimer() {
  timerInterval = setInterval(() => {
    timeLeft--;
    updateTimerDisplay();
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      finishTimer();
    }
  }, 1000);
}

// ✅ Εμφανίζει τον χρόνο σωστά (mm:ss)
function updateTimerDisplay() {
  let minutes = Math.floor(timeLeft / 60);
  let seconds = timeLeft % 60;
  document.getElementById("timer").textContent =
    `${minutes.toString().padStart(2,"0")}:${seconds.toString().padStart(2,"0")}`;
}

// ✅ Παραβίαση κανόνων
function violationDetected(reason) {
  sendTelegramMessage(`⚠️ Παραβίαση κανόνων: ${reason}. Το χρονόμετρο ξεκινά από την αρχή.`);
  alert("⚠️ Παραβίασες τον κανόνα! Το χρονόμετρο ξεκινάει ξανά!");
  resetTimer();
}

// ✅ Reset timer
function resetTimer() {
  clearInterval(timerInterval);
  timeLeft = 60;
  updateTimerDisplay();
  startTimer();
}

// ✅ Όταν λήξει το χρονόμετρο
function finishTimer() {
  if (phase === 1) {
    // Prompt για σκέψεις
    let thoughts = prompt("✍️ Ο χρόνος τελείωσε. Γράψε όσα σκέφτηκες και ρώτα ΕΥΓΕΝΙΚΑ το Αφεντικό αν μπορείς να βγεις από την τιμωρία στη γωνία (Γενικόλογα του στυλ Θα είμαι καλή κλπ για να ξεμπερδέψεις απλώς δε θα γίνουν δεκτά και θα συνεχιστεί η τιμωρία. Να είσαι λοιπόν πειστική!)");
    if (thoughts && thoughts.trim() !== "") {
      sendTelegramMessage(`📝 Ο Μπόμπος έκατσε 1 λεπτό τιμωρία στη γωνία, σκέφτηκε και λέει: ${thoughts}`);
    } else {
      sendTelegramMessage("📝 Δεν σκέφτηκε τίποτα στη γωνία σκέψης.");
    }

    // Μήνυμα + δεύτερη φάση
    sendTelegramMessage("Ο Μπόμπος θα κάτσει 45 επιπλέον δευτερόλεπτα τιμωρία στη γωνία για σιγουρία...");
    alert("Μπράβο Μπόμπο, τώρα τα λες καλά! Το Αφεντικό όμως λέει ότι θα μείνεις τιμωρία στη γωνία για 45 δευτερόλεπτα ακόμη, ώστε να βεβαιωθεί ότι έμαθες το μάθημά σου και θα κάθεσαι σούζα από δω και πέρα!");
    phase = 2;
    timeLeft = 45;
    updateTimerDisplay();
    startTimer();

  } else if (phase === 2) {
    alert("✅ Τέλος Τιμωρίας! Μπορείς να αποχωρήσεις και να ενημερώσεις ευγενικά το Αφεντικό!");
    sendTelegramMessage("✅ Ο Μπόμπος ολοκλήρωσε και τα 45 επιπλέον δευτερόλεπτα τιμωρίας και μπορεί να αποχωρήσει.");
  }
}


// ✅ Συνάρτηση για να στέλνουμε μήνυμα στο Telegram
function sendTelegramMessage(text) {
  fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      chat_id: CHAT_ID,
      text: text
    })
  });
}

// ✅ Συνάρτηση για το κουμπί “Πάτα για να μη σβήσει η οθόνη”
function stayAwake() {
  return 1;
}

// --------------------
// Ανίχνευση “απαγορευμένων” ενεργειών
// --------------------
document.addEventListener("click", (e) => {
  if (e.target && e.target.id === "stayAwakeBtn") return; // ✅ Το κουμπί είναι ΟΚ
  violationDetected("Κλικ στην οθόνη");
});

document.addEventListener("touchstart", (e) => {
  if (e.target && e.target.id === "stayAwakeBtn") return; // ✅ Το κουμπί είναι ΟΚ
  violationDetected("Άγγιγμα στην οθόνη");
});

document.addEventListener("scroll", () => violationDetected("Scroll στη σελίδα"));

// ✅ Αν ο χρήστης φύγει από τη σελίδα/αλλάξει tab
document.addEventListener("visibilitychange", () => {
  if (document.hidden) {
    violationDetected("Άφησε τη σελίδα / άλλαξε tab");
  }
});

// ✅ Εκκίνηση
updateTimerDisplay();
startTimer();
</script>

</body>
</html>
