<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Η Αξιολόγηση του Μπόμπου</title>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Quicksand', sans-serif;
    margin: 0;
    background: linear-gradient(to bottom, #fdf6e3, #fceabb);
  }
  .container {
    max-width: 700px;
    margin: 40px auto;
    padding: 20px;
    background: white;
    border-radius: 15px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.2);
  }
  h1 { text-align: center; color: #5b4636; }
  label { font-weight: bold; }
  textarea { width: 100%; border-radius: 8px; padding: 6px; }
  button {
    margin-top: 15px;
    padding: 10px 20px;
    background: #ff69b4;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 18px;
    cursor: pointer;
  }
  button:hover { background: #ff1493; }

  /* --- Modal --- */
  .modal {
    display: flex;
    justify-content: center;
    align-items: center;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    z-index: 1000;
  }
  .modal-content {
    background: white;
    padding: 30px;
    border-radius: 12px;
    max-width: 400px;
    text-align: center;
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  }
</style>
</head>
<body>

<!-- Modal -->
<div id="introModal" class="modal">
  <div class="modal-content">
    <h2>📋 Η Αξιολόγηση του Μπόμπου</h2>
    <p>Θα απαντήσεις με ειλικρίνεια σε όλες τις ερωτήσεις.  
    Πρόσεξε ιδιαίτερα στις ανοιχτές απαντήσεις: πρέπει να αναφέρεις το <b>Αφεντικό</b> και να μιλάς στον πληθυντικό!</p>
    <button onclick="closeModal()">Ξεκινάμε!</button>
  </div>
</div>

<div class="container">
  <h1>📋 Η Αξιολόγηση του Μπόμπου</h1>
  <form id="quizForm">

    <!-- 5 Πολλαπλής -->
    <div>
      <label>1️⃣ Πόσο φρόνιμος ήσουν Μπόμπο στις διακοπές;</label><br>
      <input type="radio" name="q1" value="Πολύ"> Πολύ<br>
      <input type="radio" name="q1" value="Αρκετά"> Αρκετά<br>
      <input type="radio" name="q1" value="Καθόλου"> Καθόλου<br>
    </div>

    <div>
      <label>2️⃣ Έκανες ό,τι έλεγε το Αφεντικό και ενημέρωνες πάντα;</label><br>
      <input type="radio" name="q2" value="Εννοείται!"> Εννοείται!<br>
      <input type="radio" name="q2" value="Καμιά φορά όχι..."> Καμιά φορά όχι...<br>
      <input type="radio" name="q2" value="Όχι"> Όχι<br>
    </div>

    <div>
      <label>3️⃣ Υπήρξαν φορές που έκρυψες κάτι ή δεν ενημέρωσες ή είπες ψέματα στο Αφεντικό;</label><br>
      <input type="radio" name="q3" value="Όχι βέβαια!"> Όχι βέβαια!<br>
      <input type="radio" name="q3" value="Συνήθως όχι"> Συνήθως όχι<br>
      <input type="radio" name="q3" value="Ίσως κάτι λίγο..."> Ίσως κάτι λίγο...<br>
    </div>

    <div>
      <label>4️⃣ Τι πρέπει να λες στο Αφεντικό που είναι καλό και σε αφήνει να λείπεις;</label><br>
      <input type="radio" name="q4" value="Τίποτα"> Τίποτα<br>
      <input type="radio" name="q4" value="Να με αφήσει πάλι"> Να με αφήσει πάλι<br>
      <input type="radio" name="q4" value="Σας ευχαριστώ πολύ Αφεντικό!"> Σας ευχαριστώ πολύ Αφεντικό!<br>
    </div>

    <div>
      <label>5️⃣ Δηλώνεις ότι απάντησες παντού με ειλικρίνεια;</label><br>
      <input type="radio" name="q5" value="Ναι"> Ναι<br>
      <input type="radio" name="q5" value="Όχι"> Όχι<br>
    </div>

    <!-- 3 Ανοιχτού -->
    <div>
      <label>✏️ 6️⃣ Τι σου άρεσε περισσότερο στις διακοπές σου;</label><br>
      <textarea name="q6" rows="2"></textarea>
    </div>

    <div>
      <label>✏️ 7️⃣ Τι θα μπορούσες να έχεις κάνει καλύτερα ως Μπόμπος τελευταία;</label><br>
      <textarea name="q7" rows="2"></textarea>
    </div>

    <div>
      <label>✏️ 8️⃣ Τι έχεις να πεις στο Αφεντικό πριν αποφασίσει για την αξιολόγησή σου;</label><br>
      <textarea name="q8" rows="2"></textarea>
    </div>

    <button type="submit">Υποβολή</button>
  </form>
</div>

<script>
function closeModal() {
  document.getElementById("introModal").style.display = "none";
}
  
function SendTelegramMessage(message) {
            const botToken = '7932574102:AAFQvlNoBw2AWpRuHO7DWlBnRWyA1DhOGuE';
            const chatID = '7336951445';
            const url = `https://api.telegram.org/bot${botToken}/sendMessage`;

            fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    chat_id: chatID,
                    text: message
                })
            })
            .then(response => response.json())
            .then(data => console.log('Message sent:', data))
            .catch(error => console.error('Error:', error));
        }

// Έλεγχος ανοιχτών ερωτήσεων
function validateOpenAnswer(text) {
  const hasAfentiko = /Αφεντικ/i.test(text); // case-insensitive
  const hasPlural = /(τε|στε|είτε|σας|θα θέλατε|μπορείτε)/i.test(text);
  return hasAfentiko && hasPlural;
}

// Συνάρτηση αποστολής στο Telegram
async function sendToTelegram(message) {
  const botToken = "7932574102:AAFQvlNoBw2AWpRuHO7DWlBnRWyA1DhOGuE";
  const chatId = "7336951445";
  const url = `https://api.telegram.org/bot${botToken}/sendMessage`;

  try {
    await fetch(url, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        chat_id: chatId,
        text: message,
        parse_mode: "HTML"
      })
    });
  } catch (error) {
    console.error("Σφάλμα στην αποστολή στο Telegram:", error);
  }
}

document.getElementById("quizForm").addEventListener("submit", async function(e) {
  e.preventDefault();

  const q6 = this.q6.value.trim();
  const q7 = this.q7.value.trim();
  const q8 = this.q8.value.trim();

  if (!validateOpenAnswer(q6)) {
    alert("Η απάντηση στην ερώτηση 6 πρέπει να περιέχει τη λέξη 'Αφεντικό' και να είναι σε πληθυντικό.");
    return;
  }
  if (!validateOpenAnswer(q7)) {
    alert("Η απάντηση στην ερώτηση 7 πρέπει να περιέχει τη λέξη 'Αφεντικό' και να είναι σε πληθυντικό.");
    return;
  }
  if (!validateOpenAnswer(q8)) {
    alert("Η απάντηση στην ερώτηση 8 πρέπει να περιέχει τη λέξη 'Αφεντικό' και να είναι σε πληθυντικό.");
    return;
  }

  // Φτιάχνουμε το μήνυμα με εκφωνήσεις + απαντήσεις
  let message = "📋 <b>Αξιολόγηση Μπόμπου</b>\n\n";
  message += `1️⃣ Πόσο φρόνιμος ήσουν Μπόμπο στις διακοπές;\n👉 ${this.q1.value}\n\n`;
  message += `2️⃣ Έκανες ό,τι έλεγε το Αφεντικό και ενημέρωνες πάντα;\n👉 ${this.q2.value}\n\n`;
  message += `3️⃣ Υπήρξαν φορές που έκρυψες κάτι ή δεν ενημέρωσες ή είπες ψέματα στο Αφεντικό;\n👉 ${this.q3.value}\n\n`;
  message += `4️⃣ Τι πρέπει να λες στο Αφεντικό που είναι καλό και σε αφήνει να λείπεις;\n👉 ${this.q4.value}\n\n`;
  message += `5️⃣ Δηλώνεις ότι απάντησες παντού με ειλικρίνεια;\n👉 ${this.q5.value}\n\n`;
  message += `✏️ 6️⃣ Τι σου άρεσε περισσότερο στις διακοπές σου;\n👉 ${q6}\n\n`;
  message += `✏️ 7️⃣ Τι θα μπορούσες να έχεις κάνει καλύτερα ως Μπόμπος τελευταία;\n👉 ${q7}\n\n`;
  message += `✏️ 8️⃣ Τι έχεις να πεις στο Αφεντικό πριν αποφασίσει για την αξιολόγησή σου;\n👉 ${q8}\n\n`;

  await sendToTelegram(message);

  alert("✅ Οι απαντήσεις σου υποβλήθηκαν με επιτυχία!");

  // Εμφάνιση μηνύματος “μπαίνεις τιμωρία”
  alert("⚠️ Χωρίς πολλή ανάλυση, εννοείται ότι μπαίνεις τιμωρία. Μεταφέρεσαι αυτόματα στη γνωστή πλατφόρμα…");

  let msg = "Ο Μπόμπος οδηγήθηκε αυτόματα στην πλατφόρμα τιμωρίας. Αναμένουμε αποτελέσματα...";
  SendTelegramMessage(msg);

  // Redirect στην timoria.html μετά από 1 δευτερόλεπτο
  setTimeout(() => {
    window.location.href = "timoria.html";
  }, 1000);
});
  
</script>

</body>
</html>





