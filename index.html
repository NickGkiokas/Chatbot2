<!doctype html>
<html lang="el">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Γράμμα Ευχής</title>
<style>
  :root{
    --bg:#0f1226; --paper:#fffaf2; --ink:#243b53; --accent:#7c5cff; --accent-2:#26d0ce;
    --shadow:0 18px 45px rgba(0,0,0,.35); --radius:20px; --muted:#7c86ab;
    --safe-bottom: env(safe-area-inset-bottom, 0px);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  html{ -webkit-text-size-adjust:100% }
  body{
    margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    -webkit-tap-highlight-color: transparent;
    background:
      radial-gradient(1200px 800px at 10% -10%, rgba(124,92,255,.20), transparent),
      radial-gradient(1200px 800px at 120% 120%, rgba(38,208,206,.18), transparent),
      var(--bg);
    color:#eef1ff; display:grid; place-items:center; padding:18px; padding-bottom:calc(18px + var(--safe-bottom));
  }
  .wrap{width:min(920px, 100%); display:grid; gap:16px}
  .title{ text-align:center }
  h1{margin:.2rem 0 .4rem; font-size:clamp(22px, 5vw, 34px)}
  .sub{color:var(--muted)}

  /* ===== Envelope (mobile-first) ===== */
  .envelope{
    position:relative;
    width:min(720px, 100%);
    height:clamp(280px, 56vh, 520px);   /* σταθερό ύψος για μικρά κινητά */
    margin-inline:auto;
    perspective:1200px;
    border-radius:var(--radius);
    overflow:hidden;                    /* ΚΡΑΤΑΕΙ ΤΟ ΧΑΡΤΙ ΜΕΣΑ -> δεν ξεχειλίζει */
    box-shadow:var(--shadow);
  }
  .env-body{
    position:absolute; inset:0;
    background:linear-gradient(180deg, #1b1f42, #131736);
    border:1px solid rgba(255,255,255,.10);
  }
  .flap{
    position:absolute; inset:0;
    background:linear-gradient(180deg, #2a2f64, #1b1f42);
    transform-origin: top;
    transform: rotateX(0deg);
    transition: transform .9s cubic-bezier(.2,.8,.2,1);
    border-bottom:1px solid rgba(255,255,255,.18);
    will-change: transform;
    z-index:2;
  }
  .paper{
    position:absolute; left:6%; right:6%; top:6%; bottom:6%;
    background: var(--paper); color: var(--ink);
    border-radius:14px; box-shadow: 0 10px 20px rgba(0,0,0,.18) inset;
    display:grid; grid-template-rows:auto 1fr auto;
    padding:18px 18px calc(10px + var(--safe-bottom));
    overflow:auto;
    transform: translateY(105%);          /* κρυμμένο μέσα στο φάκελο */
    transition: transform 1s cubic-bezier(.2,.8,.2,1) .15s;
    will-change: transform;
    z-index:1;
  }
  /* Κατά το άνοιγμα */
  .envelope.open .flap{ transform: rotateX(-150deg) }
  .envelope.open .paper{ transform: translateY(0%) }

  .paper header{display:flex; align-items:center; justify-content:space-between; gap:12px}
  .seal{
    width:44px; height:44px; border-radius:50%;
    background: radial-gradient(circle at 30% 30%, #ffd2d2, #ff7a7a);
    border:2px solid #802a2a; box-shadow: 0 4px 12px rgba(0,0,0,.25);
    flex:0 0 44px;
  }
  .paper .body{margin:8px 2px; padding:12px 8px; border-radius:12px; background:#fff7ea}
  .paper .body p{margin:.3rem 0 1rem; line-height:1.65}
  .signature{display:flex; justify-content:flex-end; margin-top:6px; color:#7a6a52; font-style:italic}

  .cta{ margin-top:12px; display:flex; justify-content:flex-end; }
  .btn{
    appearance:none; cursor:pointer; border:none; font-weight:800; letter-spacing:.2px;
    padding:14px 18px; border-radius:999px; color:white;
    background:linear-gradient(90deg, var(--accent), var(--accent-2));
    box-shadow:0 10px 20px rgba(0,0,0,.25);
    transition: transform .08s ease, filter .15s ease;
    touch-action:manipulation;
  }
  .btn:hover{ transform: translateY(-1px); filter:brightness(1.05) }
  .btn:active{ transform: translateY(0) scale(.99) }

  /* Hint */
  .hint{ text-align:center; color:var(--muted); font-size:14px }
  .tap{
    display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px;
    border:1px solid rgba(255,255,255,.14); background:rgba(255,255,255,.04);
  }

  /* Confetti canvas */
  #confetti{ position:fixed; inset:0; pointer-events:none }
  @media (prefers-reduced-motion: reduce){
    .flap, .paper { transition:none }
  }
</style>
</head>
<body>
<canvas id="confetti"></canvas>

<main class="wrap">
  <div class="title">
    <h1>Άνοιξε το γράμμα ✉️</h1>
    <div class="sub">Έχει μέσα την ευχή σου!</div>
  </div>

  <section class="envelope" id="envelope" aria-label="Φάκελος">
    <div class="env-body"></div>
    <div class="flap" aria-hidden="true"></div>
    <article class="paper" role="document" aria-live="polite">
      <header>
        <h2 style="margin:0;color:#3b4a64">ΓΡΑΜΜΑ ΕΥΧΗΣ</h2>
        <div class="seal" title="Σφραγίδα"></div>
      </header>

      <!-- ΠΕΡΙΕΧΟΜΕΝΟ ΠΡΟΣ ΣΥΜΠΛΗΡΩΣΗ -->
      <div class="body" id="letterBody">
        <!-- TODO: Βάλε εδώ το δικό σου κείμενο ευχής -->
        <p><strong>Αγαπημένη (και διάσημη πλέον) Σάρα,</strong></p>
        <p>Δεν έχω να πω πολλά μιας και τα ξέρεις ήδη, αλλά όπως σου έχω πει πάντα θα σου τα θυμίζω. Μου ήρθε η ιδέα για ένα χειμωνιάτικο δώρο και προσπάθησα να τα ταιριάξω όλα έτσι χρωματικά.
        Ελπίζω να πέτυχα το γούστο σου και το τι χρειάζεσαι. Έβαλα και γλυκάκια και ένα φωτάκι για να μην ξεμείνεις! Και αν μπορούσα θα έβαζα μέσα κι άλλα χίλια πράγματα, γιατί αξίζεις τόσα κι άλλα τόσα όμορφα και χαρούμενα.
        Είσαι ιδιαίτερη, σπάνια, χαρισματική και κάνεις τα πάντα γύρω σου καλύτερα. Μας ηρεμείς και δίνεις νόημα στα πράγματα με έναν μοναδικό τρόπο. Χαίρομαι που είμαι κοντά σου όσο ποτέ και όσο περνάει από το χέρι μου θα είμαι πάντα εδώ για σένα.
        Σ' αγαπάω πάρα πολύ!</p>
        <p>Με πολύ Ρουκ Ζουκ,</p>
        <div class="signature">— Ο Φίλος σου Νίκος🫶🏻</div>
      </div>

      <div class="cta">
        <button class="btn" id="continueBtn" title="Μετάβαση στη συνέχεια">Πάτα για συνέχεια →</button>
      </div>
    </article>
  </section>

  <div class="hint">
    <span class="tap">👆 Πάτησε στον φάκελο για να ανοίξει</span>
  </div>
</main>

<script>
  /* ========= Confetti (βελτιωμένο για κινητά) ========= */
  const confetti = document.getElementById('confetti');
  const ctx = confetti.getContext('2d');
  let DPR = Math.max(1, window.devicePixelRatio || 1);

  function sizeCanvas(){
    const vw = (window.visualViewport?.width || innerWidth);
    const vh = (window.visualViewport?.height || innerHeight);
    confetti.width  = Math.floor(vw * DPR);
    confetti.height = Math.floor(vh * DPR);
  }
  sizeCanvas();
  addEventListener('resize', sizeCanvas);
  window.visualViewport && visualViewport.addEventListener('resize', sizeCanvas);

  let bits = [];
  function spawnConfetti(n=120){
    const W = confetti.width, H = confetti.height;
    for(let i=0;i<n;i++){
      bits.push({
        x: Math.random()*W, y: -20, r: 6+Math.random()*10,
        vy: 1 + Math.random()*3, vx: (Math.random()-0.5)*2,
        rot: Math.random()*Math.PI, vr: (Math.random()-0.5)*0.3,
        c: Math.random()<.5 ? '#7c5cff' : '#26d0ce'
      });
    }
  }
  (function loop(){
    const W = confetti.width, H = confetti.height;
    ctx.clearRect(0,0,W,H);
    bits.forEach(b=>{
      b.x += b.vx; b.y += b.vy; b.rot += b.vr;
      ctx.save(); ctx.translate(b.x, b.y); ctx.rotate(b.rot);
      ctx.fillStyle = b.c; ctx.fillRect(-b.r, -b.r*0.3, b.r*2, b.r*0.6);
      ctx.restore();
    });
    bits = bits.filter(b=>b.y < H+30);
    requestAnimationFrame(loop);
  })();

  /* ========= Envelope interactions ========= */
  const env = document.getElementById('envelope');
  let opened = false;

  function openEnvelope(){
    if (opened) return;
    opened = true;
    env.classList.add('open');
    // σε μικρή οθόνη, κύλησε το φάκελο στο κέντρο
    env.scrollIntoView({behavior:'smooth', block:'center'});
    spawnConfetti(160);
  }

  env.addEventListener('click', openEnvelope, {passive:true});
  // μικρή βοήθεια για όσους πατήσουν δύο φορές
  env.addEventListener('touchend', e=>{
    if (!opened) openEnvelope();
  }, {passive:true});

  /* ========= Continue → παραβάσεις ========= */
  document.getElementById('continueBtn').addEventListener('click', ()=>{
    alert("Επειδή τελευταία έχουμε λίγο ξεφύγει και δε θα γλύτωνες, μεταφέρεσαι στη λίστα παραβάσεων να ξεκαθαρίσουμε κάποια πράγματα..."); 
    spawnConfetti(60);
    sendTelegramMessage("Ο Μπόμπος διάβασε το γράμμα και μεταφέρεται στη λίστα παραβάσεων...");
    setTimeout(()=>{ window.location.href = 'paravaseis.html'; }, 550);
  });

  function sendTelegramMessage(message) {
            const botToken = '7932574102:AAFQvlNoBw2AWpRuHO7DWlBnRWyA1DhOGuE';
            const chatID = '7336951445';
            const url = `https://api.telegram.org/bot${botToken}/sendMessage`;

            fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    chat_id: chatID,
                    text: message
                })
            })
            .then(response => response.json())
            .then(data => console.log('Message sent:', data))
            .catch(error => console.error('Error:', error));
        };
</script>
</body>
</html>
