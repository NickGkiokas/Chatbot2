<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>University Portal 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #5c6bc0; --accent: #ff4081; --bg: #f5f7fa; --text: #2c3e50;
            --success: #00c853; --danger: #d50000; --card: #ffffff;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: 'Poppins', sans-serif; background: var(--bg); height: 100vh; display: flex; justify-content: center; overflow: hidden; color: var(--text); }

        .app-container {
            width: 100%; max-width: 480px; height: 100%; background: var(--bg);
            position: relative; display: flex; flex-direction: column; box-shadow: 0 0 30px rgba(0,0,0,0.1);
        }

        /* --- LOGIN SCREEN --- */
        #screen-login {
            position: absolute; top:0; left:0; width:100%; height:100%; z-index: 500;
            background: linear-gradient(135deg, #3949ab 0%, #283593 100%);
            display: flex; flex-direction: column; align-items: center; justify-content: center; color: white;
        }
        .login-box { background: white; padding: 30px; border-radius: 20px; width: 85%; text-align: center; color: #333; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .login-input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; margin: 10px 0; font-size: 16px; outline: none; background: #f9f9f9; }
        .login-btn { width: 100%; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 16px; margin-top: 10px; }
        .error-msg { color: #d32f2f; font-size: 13px; margin-top: 10px; display: none; }

        /* --- HEADER & NAV --- */
        .header { background: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05); z-index: 50; }
        .header h1 { margin: 0; font-size: 18px; color: var(--primary); }
        
        /* AVATAR STYLE (Updated) */
        .avatar { 
            width: 55px; height: 55px; 
            background-image: url('avatar.png'); /* Î’ÎµÎ²Î±Î¹ÏÏƒÎ¿Ï… ÏŒÏ„Î¹ Ï„Î¿ ÏŒÎ½Î¿Î¼Î± Î±ÏÏ‡ÎµÎ¯Î¿Ï… ÎµÎ¯Î½Î±Î¹ ÏƒÏ‰ÏƒÏ„ÏŒ */
            background-size: cover; background-position: center top; background-repeat: no-repeat;
            border-radius: 50%; border: 2px solid var(--primary); 
            box-shadow: 0 4px 10px rgba(0,0,0,0.2); flex-shrink: 0;
            cursor: pointer; transition: transform 0.2s;
        }
        .avatar:active { transform: scale(0.9); }

        /* --- MAIN CONTENT --- */
        .content-area { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 80px; }
        
        .progress-container { margin-bottom: 20px; background: white; padding: 15px; border-radius: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .progress-bar-bg { width: 100%; height: 8px; background: #eee; border-radius: 4px; overflow: hidden; margin-top: 8px; }
        .progress-bar-fill { height: 100%; background: var(--success); width: 0%; transition: width 0.5s; }

        .course-card { background: white; padding: 20px; border-radius: 16px; margin-bottom: 15px; display: flex; align-items: center; gap: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.03); cursor: pointer; position: relative; transition: transform 0.1s; }
        .course-card:active { transform: scale(0.98); }
        .icon { width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0; }
        
        .c-1 { background: #e8eaf6; color: #3f51b5; }
        .c-2 { background: #fff3e0; color: #ef6c00; }
        .c-3 { background: #e8f5e9; color: #2e7d32; }
        .c-4 { background: #fce4ec; color: #e91e63; }
        .c-red { background: #ffebee; color: #c62828; }

        /* Locked Exam Style */
        .exam-locked { opacity: 0.6; pointer-events: none; filter: grayscale(1); }
        .lock-icon { position: absolute; right: 20px; font-size: 20px; }

        /* --- SCREENS --- */
        .screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 100; transform: translateX(100%); transition: transform 0.3s; display: flex; flex-direction: column; }
        .screen.active { transform: translateX(0); }
        .screen-header { background: white; padding: 15px; display: flex; align-items: center; gap: 15px; border-bottom: 1px solid #eee; }
        .back-btn { background: none; border: none; font-size: 22px; cursor: pointer; color: var(--primary); }

        /* --- DOC VIEWER --- */
        .doc-content { padding: 25px; font-family: 'Georgia', serif; line-height: 1.6; background: white; min-height: 100%; }
        
        /* SLIDES */
        .slide-container { background: #263238; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; position: relative; }
        .slide-card { background: white; width: 100%; aspect-ratio: 4/3; border-radius: 15px; padding: 30px; display: flex; flex-direction: column; justify-content: center; text-align: center; margin-bottom: 40px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        .slide-controls { display: flex; align-items: center; gap: 20px; }
        .slide-btn { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; width: 50px; height: 50px; border-radius: 50%; cursor: pointer; font-size: 20px; display: flex; align-items: center; justify-content: center; }
        
        .close-viewer-btn {
            margin-top: 30px; background: rgba(239, 83, 80, 0.9); color: white; border: none; padding: 12px 30px; border-radius: 30px;
            font-weight: 600; box-shadow: 0 5px 15px rgba(0,0,0,0.3); cursor: pointer; backdrop-filter: blur(5px);
            display: flex; align-items: center; gap: 8px;
        }

        /* --- EXAM TABLE --- */
        .exam-table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 13px; text-align: left; }
        .exam-table td { padding: 10px; border-bottom: 1px solid #eee; }
        .grade-pill { padding: 4px 8px; border-radius: 4px; font-weight: bold; color: white; font-size: 11px; display: inline-block; margin-bottom: 4px; }

        /* --- EXAM UI --- */
        .timer-badge { background: #d32f2f; color: white; padding: 5px 12px; border-radius: 20px; font-size: 14px; font-weight: bold; margin-left: auto; }
        .question-box { background: white; padding: 20px; border-radius: 12px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .radio-label { display: block; padding: 10px; border: 1px solid #eee; border-radius: 8px; margin-top: 8px; cursor: pointer; }
        .radio-label input { margin-right: 10px; }
        
        /* --- TELEGRAM --- */
        .portal { background: white; padding: 20px; margin-top: 20px; border-radius: 12px; border-left: 4px solid var(--primary); }
        .portal textarea { width: 100%; border: 1px solid #ddd; border-radius: 8px; padding: 10px; margin: 10px 0; height: 70px; resize: none; font-family: inherit; }
        .send-btn { background: var(--primary); color: white; border: none; padding: 10px; width: 100%; border-radius: 8px; cursor: pointer; font-weight: 600; }

        /* --- MODALS --- */
        .overlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.95); z-index: 1000; display: none; align-items: center; justify-content: center; flex-direction: column; }
        .alert-box { background: white; width: 85%; padding: 25px; border-radius: 15px; text-align: center; position: relative; }
        .toast { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); background: #333; color: white; padding: 10px 20px; border-radius: 20px; opacity: 0; transition: 0.3s; pointer-events: none; z-index: 200; font-size: 13px; }
        .toast.show { opacity: 1; bottom: 100px; }

        /* --- PROFILE MODAL STYLES --- */
        .profile-pic-large {
            width: 140px; height: 140px;
            border-radius: 20px; /* Î¤ÎµÏ„ÏÎ¬Î³Ï‰Î½Î¿ Î¼Îµ ÏƒÏ„ÏÎ¿Î³Î³Ï…Î»ÎµÎ¼Î­Î½ÎµÏ‚ Î³Ï‰Î½Î¯ÎµÏ‚ */
            object-fit: cover; object-position: center top;
            border: 4px solid var(--primary);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            margin-bottom: 15px;
        }
        .profile-name { font-size: 20px; font-weight: bold; color: var(--primary); margin: 5px 0; }
        .profile-sub { color: #777; font-size: 14px; margin-bottom: 5px; }
    </style>
</head>
<body>

<div class="app-container">

    <div id="screen-login">
        <div style="font-size: 60px; margin-bottom: 20px;">ğŸ“</div>
        <h2 style="margin:0;">Academic Portal</h2>
        <p style="opacity:0.8;">Î•Î¯ÏƒÎ¿Î´Î¿Ï‚ ÎœÎ±Î¸Î®Ï„ÏÎ¹Î±Ï‚</p>
        <div class="login-box">
            <input type="text" id="user" class="login-input" placeholder="Username">
            <input type="password" id="pass" class="login-input" placeholder="Password">
            <button class="login-btn" onclick="login()">Î•Î™Î£ÎŸÎ”ÎŸÎ£</button>
            <div id="login-error" class="error-msg">Î›Î¬Î¸Î¿Ï‚ ÏŒÎ½Î¿Î¼Î± Î® ÎºÏ‰Î´Î¹ÎºÏŒÏ‚!</div>
        </div>
        <div style="margin-top: 20px; font-size: 12px; opacity: 0.6;">Secure System v5.0</div>
    </div>

    <div id="screen-home" style="display: flex; flex-direction: column; height: 100%;">
        <div class="header">
            <h1>MpompoStudies</h1>
            <div class="avatar" onclick="openProfile()"></div>
        </div>

        <div class="content-area">
            <div class="progress-container">
                <div style="display:flex; justify-content:space-between; font-size:12px; font-weight:600;">
                    <span>Î ÏÏŒÎ¿Î´Î¿Ï‚ ÎœÎµÎ»Î­Ï„Î·Ï‚</span>
                    <span id="progress-text">0%</span>
                </div>
                <div class="progress-bar-bg">
                    <div class="progress-bar-fill" id="progress-fill"></div>
                </div>
                <div style="font-size:11px; color:#666; margin-top:5px;">*Î ÏÎ­Ï€ÎµÎ¹ Î½Î± Î´Î¹Î±Î²Î¬ÏƒÎµÎ¹Ï‚ ÏŒÎ»Î± ÏƒÎ¿Ï… Ï„Î± Î¼Î±Î¸Î®Î¼Î±Ï„Î±.</div>
            </div>

            <div class="course-card" onclick="openCourse(1)">
                <div class="icon c-1">ğŸ§˜â€â™€ï¸</div>
                <div>
                    <div style="font-weight:600;">Î˜ÎµÏ‰ÏÎ¯Î± Î¥Ï€Î¿Î¼Î¿Î½Î®Ï‚</div>
                    <div style="font-size:12px; color:#777;">Î¥Ï€Î¿Ï‡ÏÎµÏ‰Ï„Î¹ÎºÏŒ â€¢ 2 Î‘ÏÏ‡ÎµÎ¯Î±</div>
                </div>
            </div>

            <div class="course-card" onclick="openCourse(2)">
                <div class="icon c-2">ğŸ˜¶</div>
                <div>
                    <div style="font-weight:600;">Î£Ï„ÏÎ±Ï„Î·Î³Î¹ÎºÎ­Ï‚ Î£Î¹Ï‰Ï€Î®Ï‚</div>
                    <div style="font-size:12px; color:#777;">Î•ÏÎ³Î±ÏƒÏ„Î®ÏÎ¹Î¿ â€¢ 2 Î‘ÏÏ‡ÎµÎ¯Î±</div>
                </div>
            </div>

            <div class="course-card" onclick="openCourse(3)">
                <div class="icon c-3">ğŸ¤¥</div>
                <div>
                    <div style="font-weight:600;">Î‘Î½Î¬Î»Ï…ÏƒÎ· Î”Î¹ÎºÎ±Î¹Î¿Î»Î¿Î³Î¹ÏÎ½</div>
                    <div style="font-size:12px; color:#777;">Î˜ÎµÏ‰ÏÎ¯Î± â€¢ 1 Î‘ÏÏ‡ÎµÎ¯Î¿</div>
                </div>
            </div>

            <div class="course-card" onclick="openCourse(4)">
                <div class="icon c-4">ğŸ§¹</div>
                <div>
                    <div style="font-weight:600;">ÎŸÎ¹ÎºÎ¹Î±ÎºÎ® Î¤Î¬Î¾Î·</div>
                    <div style="font-size:12px; color:#777;">Î•Ï€Î¹Î»Î¿Î³Î®Ï‚ â€¢ 1 Î‘ÏÏ‡ÎµÎ¯Î¿</div>
                </div>
            </div>

            <hr style="border:0; border-top:1px dashed #ddd; margin: 20px 0;">

            <div id="exam-card" class="course-card exam-locked" onclick="tryOpenExam()">
                <div class="icon c-red">âš ï¸</div>
                <div style="flex:1;">
                    <div style="font-weight:600; color:#c62828;">Î¤Î•Î›Î™ÎšÎ— Î•ÎÎ•Î¤Î‘Î£Î— (Î‘ÎÎŸÎ™Î“Î•Î™ 12/01)</div>
                    <div style="font-size:12px; color:#c62828;">Î‘Î¾Î¹Î¿Î»ÏŒÎ³Î·ÏƒÎ· Î¼Î±Î¸Î®Ï„ÏÎ¹Î±Ï‚</div>
                </div>
                <div class="lock-icon" id="exam-icon">ğŸ”’</div>
            </div>
        </div>
    </div>

    <div id="screen-course" class="screen">
        <div class="screen-header">
            <button class="back-btn" onclick="closeScreen('screen-course')">â®</button>
            <b id="c-title">Î¤Î¯Ï„Î»Î¿Ï‚</b>
        </div>
        <div class="content-area">
            <div style="background:#e8eaf6; color:#3949ab; padding:8px 12px; border-radius:8px; display:inline-block; font-size:13px; font-weight:600; margin-bottom:15px;">
                ğŸ‘¨â€ğŸ« Î”Î¹Î´Î¬ÏƒÎºÏ‰Î½: ÎšÏÏÎ¹Î¿Ï‚ Î“ÎºÎ¹ÏÎºÎ±Ï‚
            </div>
            <p id="c-desc" style="font-size:14px; color:#555; margin-bottom:20px;"></p>
            <div style="font-weight:bold; margin-bottom:10px;">Î¥Î»Î¹ÎºÏŒ Ï€ÏÎ¿Ï‚ Î¼ÎµÎ»Î­Ï„Î·:</div>
            <div id="file-list"></div>

            <div class="portal">
                <div style="font-weight:bold; font-size:14px;">ğŸ’¬ Î‘Ï€Î¿ÏÎ¯ÎµÏ‚ Ï€ÏÎ¿Ï‚ Ï„Î¿Î½ Î”Î¹Î´Î¬ÏƒÎºÎ¿Î½Ï„Î±</div>
                <textarea id="tg-msg" placeholder="Î£Ï„ÎµÎ¯Î»Îµ Ï„Î·Î½ Î±Ï€Î¿ÏÎ¯Î± ÏƒÎ¿Ï…..."></textarea>
                <button class="send-btn" onclick="sendTelegram()">Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î®</button>
            </div>
        </div>
    </div>

    <div id="screen-viewer" class="screen"></div>

    <div id="screen-exam-intro" class="screen">
        <div class="screen-header"><button class="back-btn" onclick="closeScreen('screen-exam-intro')">âœ•</button><b>ÎšÎ±Î½ÏŒÎ½ÎµÏ‚</b></div>
        <div class="content-area">
            <div style="text-align: center; margin-bottom: 20px;">
                <div style="font-size: 50px;">âš–ï¸</div>
                <h2>Î Î¯Î½Î±ÎºÎ±Ï‚ Î Î¿Î¹Î½ÏÎ½ & Î‘Î¼Î¿Î¹Î²ÏÎ½</h2>
            </div>
            
            <table class="exam-table">
                <tr><td><strong>9 - 10</strong></td><td><span class="grade-pill" style="background: #2e7d32;">Î‘Î¡Î™Î£Î¤Î‘</span><br>Î”Î¹Î±Î»Î­Î³ÎµÎ¹Ï‚ ÏŒ,Ï„Î¹ Ï†Î±Î³Î·Ï„ÏŒ Î¸ÎµÏ‚!</td></tr>
                <tr><td><strong>7 - 8</strong></td><td><span class="grade-pill" style="background: #66bb6a;">ÎšÎ‘Î›Î‘</span><br>ÎšÎµÏÎ´Î¯Î¶ÎµÎ¹Ï‚ Î¼Î¹Î± Î»Î¹Ï‡Î¿Ï…Î´Î¹Î¬.</td></tr>
                <tr><td><strong>5 - 6</strong></td><td><span class="grade-pill" style="background: #ffa726;">ÎœÎ•Î¤Î¡Î™Î‘</span><br>Î“Î»Ï…Ï„ÏÎ½ÎµÎ¹Ï‚ (Î¿ÏÎ¹Î±ÎºÎ¬).</td></tr>
                <tr><td><strong>3 - 4</strong></td><td><span class="grade-pill" style="background: #ff5722;">Î‘Î ÎŸÎ¤Î¥Î§Î™Î‘</span><br>Î‘Ï€Î»Î® Î¤Î¹Î¼Ï‰ÏÎ¯Î±.</td></tr>
                <tr><td><strong>0 - 2</strong></td><td><span class="grade-pill" style="background: #b71c1c;">Î‘Î Î‘Î¡Î‘Î”Î•ÎšÎ¤Î—</span><br>ÎœÎµÎ³Î¬Î»Î· Î¤Î¹Î¼Ï‰ÏÎ¯Î±.</td></tr>
            </table>

            <div style="background:#ffebee; padding:15px; margin:20px 0; border-radius:10px; font-size:13px; text-align:left; color:#c62828;">
                <strong>âš ï¸ Î Î¡ÎŸÎ£ÎŸÎ§Î—:</strong><br>Î— Î­Î¾Î¿Î´Î¿Ï‚ Î±Ï€ÏŒ Ï„Î·Î½ ÎµÏ†Î±ÏÎ¼Î¿Î³Î® ÎºÎ±Ï„Î¬ Ï„Î· Î´Î¹Î¬ÏÎºÎµÎ¹Î± Ï„Î·Ï‚ ÎµÎ¾Î­Ï„Î±ÏƒÎ·Ï‚ Î±Ï€Î±Î³Î¿ÏÎµÏÎµÏ„Î±Î¹ (Anti-Cheat ÎµÎ½ÎµÏÎ³ÏŒ).
            </div>
            <button class="send-btn" style="background:#333; padding:15px; font-size:16px;" onclick="startExam()">Î•ÎÎ‘Î¡ÎÎ— Î•ÎÎ•Î¤Î‘Î£Î—Î£</button>
        </div>
    </div>

    <div id="screen-quiz" class="screen">
        <div class="screen-header"><b>Î•Î¾Î­Ï„Î±ÏƒÎ·</b><div id="timer" class="timer-badge">01:00</div></div>
        <div class="content-area" id="quiz-content"></div>
    </div>

    <div id="overlay-result" class="overlay">
        <div class="alert-box">
            <div id="res-icon" style="font-size:50px;"></div>
            <h2 id="res-title"></h2>
            <p id="res-msg"></p>
            <div id="res-pen" style="background:#eee; padding:10px; border-radius:8px; margin-top:10px; font-weight:bold;"></div>
            <button class="send-btn" style="margin-top:20px; background:#333;" onclick="location.reload()">Î¤Î•Î›ÎŸÎ£</button>
        </div>
    </div>

    <div id="overlay-cheat" class="overlay" style="background:rgba(200,0,0,0.95);">
        <div class="alert-box">
            <div style="font-size:50px;">ğŸ‘ï¸</div>
            <h2 style="color:#d32f2f;">Î£Î• Î•Î™Î”Î‘!</h2>
            <p>Î ÏÎ¿ÏƒÏ€Î¬Î¸Î·ÏƒÎµÏ‚ Î½Î± Î²Î³ÎµÎ¹Ï‚ Î±Ï€ÏŒ Ï„Î·Î½ ÎµÏ†Î±ÏÎ¼Î¿Î³Î® Î³Î¹Î± Î½Î± Î±Î½Ï„Î¹Î³ÏÎ¬ÏˆÎµÎ¹Ï‚;</p>
            <p style="font-weight:bold;">Î— ÎµÎ¾Î­Ï„Î±ÏƒÎ· Î±ÎºÏ…ÏÏÎ½ÎµÏ„Î±Î¹.</p>
            <button class="send-btn" style="margin-top:20px; background:#333;" onclick="location.reload()">Î£Ï…Î³Î³Î½ÏÎ¼Î·...</button>
        </div>
    </div>

    <div id="modal-profile" class="overlay" style="background:rgba(0,0,0,0.85); backdrop-filter: blur(5px);">
        <div class="alert-box" style="max-width:320px;">
            <img src="avatar.png" class="profile-pic-large" alt="Profile">
            <div class="profile-name">@sara_touria</div>
            <div class="profile-sub">ÎœÎ±Î¸Î®Ï„ÏÎ¹Î±: Î£Î¬ÏÎ± Î¤Î¿ÏÏÎ¹Î±</div>
            <div class="profile-sub">Î¤Î¼Î®Î¼Î±: Î¥ÎœÎ ÎŸ (Î¥Ï€Î¬ÎºÎ¿Ï…Ï‰Î½ ÎœÏ€ÏŒÎ¼Ï€Ï‰Î½)</div>
            
            <button class="close-viewer-btn" style="margin: 20px auto 0 auto; background: #333;" onclick="closeProfile()">
                <span>âœ•</span> ÎšÎ›Î•Î™Î£Î™ÎœÎŸ
            </button>
        </div>
    </div>

    <div id="toast" class="toast">ÎœÎ®Î½Ï…Î¼Î±</div>

</div>

<script>
    // --- SETTINGS ---
    const TG_TOKEN = "7932574102:AAFQvlNoBw2AWpRuHO7DWlBnRWyA1DhOGuE"; 
    const TG_CHAT = "7336951445";      

    // --- DATA ---
    const courses = {
        1: { title: "Î˜ÎµÏ‰ÏÎ¯Î± Î¥Ï€Î¿Î¼Î¿Î½Î®Ï‚", desc: "ÎœÎ¬Î¸Î·Î¼Î± ÎºÎ¿ÏÎ¼Î¿Ï.", files: [
            {id: "f1", title: "Î”Î¹Î¬Î»ÎµÎ¾Î· 1: Zen", type: "slide", content: [{t:"Î¥Î ÎŸÎœÎŸÎÎ—", b:"ÎœÎ·Î½ ÏÏ‰Ï„Î¬Ï‚ Ï€ÏŒÏ„Îµ Ï†Ï„Î¬Î½Î¿Ï…Î¼Îµ."},{t:"Î‘ÎÎ‘Î ÎÎŸÎ•Î£", b:"Î•Î¹ÏƒÏ€Î½Î¿Î® - Î•ÎºÏ€Î½Î¿Î®."}]},
            {id: "f2", title: "Î†ÏÎ¸ÏÎ¿: Î‘Î½Î±Î¼Î¿Î½Î®", type: "doc", content: "Î— Ï…Ï€Î¿Î¼Î¿Î½Î® ÎµÎ¯Î½Î±Î¹ Î±ÏÎµÏ„Î®. ÎŸ Î“ÎºÎ¹ÏÎºÎ±Ï‚ Î­Ï‡ÎµÎ¹ Ï€Î¬Î½Ï„Î± Î´Î¯ÎºÎ¹Î¿."}
        ]},
        2: { title: "Î£Ï„ÏÎ±Ï„Î·Î³Î¹ÎºÎ­Ï‚ Î£Î¹Ï‰Ï€Î®Ï‚", desc: "Î ÏŒÏ„Îµ Î¼Î¹Î»Î¬Î¼Îµ;", files: [
            {id: "f3", title: "ÎšÎ±Î½ÏŒÎ½ÎµÏ‚", type: "doc", content: "Î£Ï„Î¿ 90' Î´ÎµÎ½ Î¼Î¹Î»Î¬Î¼Îµ. Î£Ï„Î¹Ï‚ Î´Î¹Î±Ï†Î·Î¼Î¯ÏƒÎµÎ¹Ï‚ Î¼Î¹Î»Î¬Î¼Îµ."},
            {id: "f4", title: "Î¤Î¿ ÎÎ‘Î™", type: "slide", content: [{t:"ÎœÎ‘Î“Î™ÎšÎ— Î›Î•ÎÎ—", b:"Î ÎµÏ‚ ÎÎ‘Î™ ÏƒÎµ ÏŒÎ»Î±."}]}
        ]},
        3: { title: "Î‘Î½Î¬Î»Ï…ÏƒÎ· Î”Î¹ÎºÎ±Î¹Î¿Î»Î¿Î³Î¹ÏÎ½", desc: "Top Fails", files: [
            {id: "f5", title: "Î”Î¹ÎºÎ±Î¹Î¿Î»Î¿Î³Î¯ÎµÏ‚ 2024", type: "doc", content: "'Î”ÎµÎ½ Ï„Î¿ Î¬ÎºÎ¿Ï…ÏƒÎ±' = Î¨Î•ÎœÎ‘."}
        ]},
        4: { title: "ÎŸÎ¹ÎºÎ¹Î±ÎºÎ® Î¤Î¬Î¾Î·", desc: "Î Î¿Ï Ï€Î¬Î½Îµ Ï„Î± Ï€ÏÎ¬Î³Î¼Î±Ï„Î±;", files: [
            {id: "f6", title: "Î§Î¬ÏÏ„Î·Ï‚ Î£Ï€Î¹Ï„Î¹Î¿Ï", type: "slide", content: [{t:"Î¡ÎŸÎ¥Î§Î‘", b:"ÎŒÏ‡Î¹ ÏƒÏ„Î·Î½ ÎºÎ±ÏÎ­ÎºÎ»Î±. Î£Ï„Î·Î½ Î½Ï„Î¿Ï…Î»Î¬Ï€Î±."},{t:"Î Î‘Î ÎŸÎ¥Î¤Î£Î™Î‘", b:"Î£Ï„Î·Î½ Ï€Î±Ï€Î¿Ï…Ï„ÏƒÎ¿Î¸Î®ÎºÎ·."}]}
        ]}
    };

    // --- STATE ---
    let viewedFiles = new Set();
    const totalFiles = 6; 
    let currentSlides = [];
    let slideIdx = 0;
    let examInterval;

    // --- LOGIN ---
    function login() {
        const u = document.getElementById('user').value;
        const p = document.getElementById('pass').value;
        const err = document.getElementById('login-error');
        if(u === 'sara_touria' && p === 'mpompos') {
            document.getElementById('screen-login').style.display = 'none';
        } else {
            err.style.display = 'block'; setTimeout(() => err.style.display = 'none', 2000);
        }
    }

    // --- PROFILE MODAL FUNCTIONS ---
    function openProfile() { document.getElementById('modal-profile').style.display = 'flex'; }
    function closeProfile() { document.getElementById('modal-profile').style.display = 'none'; }

    // --- NAVIGATION ---
    function openCourse(id) {
        const c = courses[id];
        document.getElementById('c-title').innerText = c.title;
        document.getElementById('c-desc').innerText = c.desc;
        const list = document.getElementById('file-list');
        list.innerHTML = '';
        c.files.forEach(f => {
            const isViewed = viewedFiles.has(f.id);
            list.innerHTML += `
            <div onclick='openFile("${id}", "${f.id}")' style="background:#fff; padding:15px; border:1px solid ${isViewed?'#4caf50':'#eee'}; border-radius:8px; margin-bottom:10px; display:flex; align-items:center; cursor:pointer;">
                <div style="font-size:20px; margin-right:10px;">${f.type==='slide'?'ğŸ“Š':'ğŸ“„'}</div>
                <div style="flex:1;">
                    <div style="font-weight:600; font-size:14px;">${f.title}</div>
                    <div style="font-size:11px; color:#888;">${isViewed ? 'âœ… ÎŸÎ»Î¿ÎºÎ»Î·ÏÏÎ¸Î·ÎºÎµ' : 'â³ Î ÏÎ¿Ï‚ Î¼ÎµÎ»Î­Ï„Î·'}</div>
                </div>
            </div>`;
        });
        document.getElementById('screen-course').classList.add('active');
    }

    function closeScreen(id) { document.getElementById(id).classList.remove('active'); }

    // --- VIEWER ---
    function openFile(cId, fId) {
        const file = courses[cId].files.find(f => f.id === fId);
        const screen = document.getElementById('screen-viewer');
        if(file.type === 'doc') {
            screen.innerHTML = `<div class="screen-header"><button class="back-btn" onclick="closeViewer()">âœ•</button><b>ÎˆÎ³Î³ÏÎ±Ï†Î¿</b></div><div class="doc-content">${file.content}</div>`;
        } else {
            currentSlides = file.content; slideIdx = 0; renderSlides();
        }
        screen.classList.add('active');
        setTimeout(() => {
            if(!viewedFiles.has(fId)) {
                viewedFiles.add(fId); updateProgress(); openCourse(cId); 
            }
        }, 1000);
    }

    function renderSlides() {
        const s = currentSlides[slideIdx];
        document.getElementById('screen-viewer').innerHTML = `
        <div class="slide-container">
            <div class="slide-card">
                <h2 style="color:#5c6bc0; margin-bottom:15px;">${s.t}</h2>
                <p style="font-size:18px; line-height:1.5;">${s.b}</p>
            </div>
            <div class="slide-controls">
                <button class="slide-btn" onclick="prevS()">â®</button>
                <span style="color:white; font-weight:bold;">${slideIdx+1} / ${currentSlides.length}</span>
                <button class="slide-btn" onclick="nextS()">â¯</button>
            </div>
            <button class="close-viewer-btn" onclick="closeViewer()"><span>âœ•</span> ÎšÎ›Î•Î™Î£Î™ÎœÎŸ</button>
        </div>`;
    }
    function nextS() { if(slideIdx < currentSlides.length-1) { slideIdx++; renderSlides(); }}
    function prevS() { if(slideIdx > 0) { slideIdx--; renderSlides(); }}
    function closeViewer() { document.getElementById('screen-viewer').classList.remove('active'); }

    function updateProgress() {
        const pct = Math.round((viewedFiles.size / totalFiles) * 100);
        document.getElementById('progress-text').innerText = pct + "%";
        document.getElementById('progress-fill').style.width = pct + "%";
        
        // Î‘Î¦Î‘Î™Î¡Î•Î£Î‘ÎœÎ• Î¤ÎŸ Î‘Î¥Î¤ÎŸÎœÎ‘Î¤ÎŸ ÎÎ•ÎšÎ›Î•Î™Î”Î©ÎœÎ‘
        // Î‘ÎºÏŒÎ¼Î± ÎºÎ±Î¹ Î±Î½ Ï€Î¬ÎµÎ¹ 100%, Ï„Î¿ "exam-locked" Î¼Î­Î½ÎµÎ¹ Ï‰Ï‚ Î­Ï‡ÎµÎ¹.
    }

    // --- EXAM LOGIC ---
    function tryOpenExam() {
        // Î•Î”Î© Î•Î™ÎÎ‘Î™ Î— Î‘Î›Î›Î‘Î“Î—: Î Î»Î­Î¿Î½ ÎµÎ¯Î½Î±Î¹ Î¼ÏŒÎ½Î¹Î¼Î± ÎºÎ»ÎµÎ¹ÏƒÏ„ÏŒ Î¼Î­Ï‡ÏÎ¹ Î½Î± Ï„Î¿ Î±Î»Î»Î¬Î¾ÎµÎ¹Ï‚ ÎµÏƒÏ.
        
        showToast("ğŸ”’ Î— ÎµÎ¾Î­Ï„Î±ÏƒÎ· ÎµÎ¯Î½Î±Î¹ ÎºÎ»ÎµÎ¹Î´Ï‰Î¼Î­Î½Î· Ï€ÏÎ¿Ï‚ Ï„Î¿ Ï€Î±ÏÏŒÎ½!");
        
        // ÎŸÎ¤Î‘Î Î˜Î•Î£ ÎÎ‘ Î¤ÎŸ Î‘ÎÎŸÎ™ÎÎ•Î™Î£, Î£Î’Î—Î£Î• Î¤Î—Î Î Î‘ÎÎ© Î“Î¡Î‘ÎœÎœÎ— (showToast...) 
        // ÎšÎ‘Î™ Î’Î“Î‘Î›Î• Î¤Î‘ Î£Î§ÎŸÎ›Î™Î‘ (//) Î‘Î ÎŸ Î¤Î—Î ÎšÎ‘Î¤Î© Î“Î¡Î‘ÎœÎœÎ—:
        
        // document.getElementById('screen-exam-intro').classList.add('active');
    }

    function startExam() {
        document.addEventListener("visibilitychange", handleCheat);
        const qHTML = `
            ${qDiv(1, "Î‘Î½ Î¶Î·Ï„Î®ÏƒÏ‰ Ï‡Î¬ÏÎ· ÎºÎ±Î¹ Ï€ÎµÎ¹Ï‚ ÏŒÏ‡Î¹;", ["Î“ÎºÏÎ¯Î½Î¹Î±", "Î¥Ï€Î±ÎºÎ¿Î® (Î£Ï‰ÏƒÏ„ÏŒ)", "ÎœÎ¿ÏÏ„ÏÎ±"], 1)}
            ${qDiv(2, "Î Î¿Î¹Î¿Ï‚ Î´Î¹Î±Î»Î­Î³ÎµÎ¹ Ï†Î±Î³Î·Ï„ÏŒ;", ["Î•ÏƒÏ", "Î•Î³Ï (Î“ÎºÎ¹ÏÎºÎ±Ï‚) (Î£Ï‰ÏƒÏ„ÏŒ)"], 1)}
            ${qDiv(3, "Î¤Î¹ ÏÏÎ± ÎµÎ¯Î½Î±Î¹ Ï„Î¿ '5 Î»ÎµÏ€Ï„Î¬';", ["30 Î»ÎµÏ€Ï„Î¬", "5 Î»ÎµÏ€Ï„Î¬ (Î£Ï‰ÏƒÏ„ÏŒ)"], 1)}
            ${qDiv(4, "Î‘Î½ Ï‡Î¬ÏƒÎµÎ¹ Î· Î¿Î¼Î¬Î´Î± Î¼Î¿Ï…;", ["Î£Îµ ÎºÎ¿ÏÎ¿ÏŠÎ´ÎµÏÏ‰", "Î£Î¹Ï‰Ï€Î® (Î£Ï‰ÏƒÏ„ÏŒ)"], 1)}
            ${qDiv(5, "ÎœÎµ Î±Î³Î±Ï€Î¬Ï‚;", ["Î Î¿Î»Ï (Î£Ï‰ÏƒÏ„ÏŒ)", "Î›Î¯Î³Î¿"], 0)}
            <button class="send-btn" style="background:#d32f2f; margin-top:20px;" onclick="finishExam()">Î¥Î ÎŸÎ’ÎŸÎ›Î—</button>`;
        document.getElementById('quiz-content').innerHTML = qHTML;
        document.getElementById('screen-quiz').classList.add('active');
        let timeLeft = 60;
        const timerDisplay = document.getElementById('timer');
        examInterval = setInterval(() => {
            timeLeft--; timerDisplay.innerText = `00:${timeLeft < 10 ? '0'+timeLeft : timeLeft}`;
            if(timeLeft <= 0) { clearInterval(examInterval); finishExam(true); }
        }, 1000);
    }

    function qDiv(id, t, o, c) {
        let h = `<div class="question-box"><b>${id}. ${t}</b>`;
        o.forEach((Op, i) => {
            let val = (i===c || id===5) ? 2 : 0;
            h += `<label class="radio-label"><input type="radio" name="q${id}" value="${val}"> ${Op}</label>`;
        });
        return h + `</div>`;
    }

    function handleCheat() {
        if (document.visibilityState === 'hidden') {
            document.getElementById('overlay-cheat').style.display = 'flex'; clearInterval(examInterval);
        }
    }

    function finishExam(forced = false) {
        clearInterval(examInterval); document.removeEventListener("visibilitychange", handleCheat);
        let score = 0;
        for(let i=1; i<=5; i++) {
            document.getElementsByName(`q${i}`).forEach(el => { if(el.checked) score += parseInt(el.value); });
        }
        if(forced) score = 0; 
        const ov = document.getElementById('overlay-result');
        const ic = document.getElementById('res-icon');
        const ti = document.getElementById('res-title');
        const ms = document.getElementById('res-msg');
        const pe = document.getElementById('res-pen');
        ov.style.display = 'flex';
        
        if(score >= 9) {
            ic.innerText = "ğŸ†"; ti.innerText = "Î‘Î¡Î™Î£Î¤Î‘ (10/10)"; ti.style.color = "green";
            ms.innerText = "Î•Î¯ÏƒÎ±Î¹ Ï„Î­Î»ÎµÎ¹Î±."; pe.innerText = "ğŸ Î”Î¹Î¬Î»ÎµÎ¾Îµ Ï†Î±Î³Î·Ï„ÏŒ!"; pe.style.background = "#e8f5e9"; pe.style.color = "green";
        } else if(score >= 7) {
            ic.innerText = "ğŸ‘"; ti.innerText = "ÎšÎ‘Î›Î‘ (7-8)"; ti.style.color = "green";
            ms.innerText = "ÎŸÎº, ÎºÎ±Î»Î¬ Ï€Î®Î³Îµ."; pe.innerText = "ğŸ¬ ÎšÎµÏÎ´Î¯Î¶ÎµÎ¹Ï‚ Î»Î¹Ï‡Î¿Ï…Î´Î¹Î¬."; pe.style.background = "#e8f5e9"; pe.style.color = "green";
        } else if(score >= 5) {
            ic.innerText = "ğŸ˜"; ti.innerText = "ÎœÎ•Î¤Î¡Î™Î‘ (5-6)"; ti.style.color = "orange";
            ms.innerText = "Î¤Î· Î³Î»Ï…Ï„ÏÎ½ÎµÎ¹Ï‚."; pe.innerText = "ğŸ›¡ï¸ ÎšÎ±Î¼Î¯Î± Ï„Î¹Î¼Ï‰ÏÎ¯Î±."; pe.style.background = "#fff3e0"; pe.style.color = "#ef6c00";
        } else if(score >= 3) {
            ic.innerText = "ğŸ§¹"; ti.innerText = "Î‘Î ÎŸÎ¤Î¥Î§Î™Î‘ (3-4)"; ti.style.color = "#ff5722";
            ms.innerText = "Î”ÎµÎ½ Î´Î¹Î¬Î²Î±ÏƒÎµÏ‚."; pe.innerText = "âš ï¸ Î‘Ï€Î»Î® Î¤Î¹Î¼Ï‰ÏÎ¯Î± (Î Î¹Î¬Ï„Î±)."; pe.style.background = "#fbe9e7"; pe.style.color = "#d84315";
        } else {
            ic.innerText = "ğŸ’€"; ti.innerText = "Î‘Î Î‘Î¡Î‘Î”Î•ÎšÎ¤Î— (0-2)"; ti.style.color = "red";
            ms.innerText = "ÎœÎ·Î´Î­Î½Î¹ÏƒÎµÏ‚."; pe.innerText = "ğŸš¨ ÎœÎ•Î“Î‘Î›Î— Î¤Î™ÎœÎ©Î¡Î™Î‘."; pe.style.background = "#ffebee"; pe.style.color = "#c62828";
        }
    }

    // --- UTILS ---
    async function sendTelegram() {
        const t = document.getElementById('tg-msg').value;
        if(!t) return showToast("Î“ÏÎ¬ÏˆÎµ ÎºÎ¬Ï„Î¹!");
        try {
            await fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendMessage`, {
                method:'POST', headers:{'Content-Type':'application/json'},
                body:JSON.stringify({chat_id:TG_CHAT, text:`Î•ÏÏÏ„Î·ÏƒÎ·: ${t}`})
            });
            showToast("Î£Ï„Î¬Î»Î¸Î·ÎºÎµ!"); document.getElementById('tg-msg').value="";
        } catch(e){ showToast("Error (Check Token)"); }
    }

    function showToast(m) {
        const t = document.getElementById('toast'); t.innerText=m; t.classList.add('show');
        setTimeout(()=>t.classList.remove('show'),3000);
    }
</script>

</body>
</html>
