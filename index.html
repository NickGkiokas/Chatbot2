<!doctype html>
<html lang="el">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Î¤Î¹ Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î± Î±Ï€ÏŒ Ï„Î± ÎœÎ±Îº ÎµÎ¯ÏƒÎ±Î¹;</title>
  <style>
    :root{
      --bg:#0f1226; /* deep indigo */
      --card:#161a38;
      --muted:#8b90b5;
      --text:#e8ebff;
      --accent:#7c5cff; /* violet */
      --accent-2:#26d0ce; /* teal */
      --radius:18px;
      --shadow:0 10px 25px rgba(0,0,0,.35);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
    }

    /* Mobile/iPhone friendliness */
    html, body { height: 100%; }
    html { -webkit-text-size-adjust: 100%; }
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      background: radial-gradient(1200px 800px at 10% -10%, rgba(124,92,255,.25), transparent),
                  radial-gradient(1200px 800px at 110% 110%, rgba(38,208,206,.2), transparent),
                  var(--bg);
      color:var(--text);
      display:grid; place-items:center; padding:16px; padding-bottom: calc(16px + var(--safe-bottom));
    }

    .container{width:min(900px, 100%);} 
    .card{background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.08); border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden}
    .header{padding:22px 18px 10px}
    h1{margin:0; font-size:clamp(22px, 6vw, 36px); letter-spacing:.3px}
    .sub{color:var(--muted); margin-top:6px; font-size:clamp(12px, 3.2vw, 14px)}

    .progress{height:10px; background:rgba(255,255,255,.08); border-radius:999px; overflow:hidden; margin:12px 18px}
    .progress>span{display:block; height:100%; width:0%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); transition:width .35s ease}

    .body{padding:14px 18px 18px}
    .pill{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; border:1px solid rgba(255,255,255,.14); font-size:12px; color:var(--muted)}

    /* Question area */
    .question{font-size:clamp(18px, 4.8vw, 20px); margin:10px 0 12px; line-height:1.35}
    .q-image { width:100%; border-radius:14px; overflow:hidden; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.1); margin-bottom:10px }
    .q-image img { width:100%; height:220px; object-fit:cover; display:block }
    @media (min-width:720px){ .q-image img{ height:260px } }

    .choices{display:grid; grid-template-columns:1fr; gap:10px}
    @media (min-width:720px){ .choices{grid-template-columns:1fr 1fr} }

    .choice{ position:relative; display:flex; gap:12px; align-items:center; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.02);
      border-radius:14px; padding:14px; cursor:pointer; transition:transform .08s ease, border-color .15s ease, background .15s ease; min-height:54px }
    .choice:hover{transform:translateY(-1px); border-color:rgba(124,92,255,.5)}
    .choice[aria-checked="true"]{border-color:var(--accent); background:linear-gradient(180deg, rgba(124,92,255,.18), rgba(124,92,255,.05))}
    .choice input{position:absolute; inset:0; opacity:0; pointer-events:none}
    .choice-thumb{ flex:0 0 56px; height:56px; border-radius:12px; overflow:hidden; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08) }
    .choice-thumb img{ width:100%; height:100%; object-fit:cover; display:block }
    .choice-text{ flex:1; font-size:16px; line-height:1.35 }

    .controls{position:sticky; bottom:0; background: linear-gradient(180deg, rgba(15,18,38,0), rgba(15,18,38,.85) 30%, rgba(15,18,38,1) 60%);
      margin:10px -18px -18px; padding:12px 18px calc(12px + var(--safe-bottom)); display:flex; gap:10px; justify-content:space-between; align-items:center}
    .left, .right{display:flex; gap:10px}

    .btn{appearance:none; border:1px solid rgba(255,255,255,.14); background:rgba(255,255,255,.05);
      color:var(--text); border-radius:999px; padding:14px 18px; font-weight:700; letter-spacing:.2px; cursor:pointer; font-size:16px;
      transition: transform .08s ease, background .15s ease, border-color .15s ease; min-height:48px; min-width:44px }
    .btn:hover{transform:translateY(-1px); border-color:rgba(255,255,255,.3)}
    .btn.primary{background:linear-gradient(90deg, var(--accent), var(--accent-2)); border-color:transparent}
    .btn.ghost{background:transparent}
    .btn:disabled{opacity:.5; cursor:not-allowed; transform:none}

    .start{display:grid; gap:16px; text-align:center; padding:28px}

    /* Result area */
    .result{ display:grid; gap:12px }
    .hero { width:100%; border-radius:16px; overflow:hidden; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.1) }
    .hero img{ width:100%; height:260px; object-fit:cover; display:block }
    @media (min-width:720px){ .hero img{ height:320px } }
    .result h2{margin:6px 0 0; font-size:clamp(22px, 5.6vw, 28px) }
    .result p{color:var(--muted); line-height:1.6}
    .badges{display:flex; flex-wrap:wrap; gap:8px; margin-top:6px}

    .footer-note{margin-top:14px; color:var(--muted); font-size:12px}
    .sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0}

    /* Reduce motion for users who prefer it */
    @media (prefers-reduced-motion: reduce){
      .progress>span, .choice, .btn{ transition:none }
    }
  </style>
</head>
<body>
  <main class="container card" role="region" aria-labelledby="quizTitle">
    <div class="header">
      <h1 id="quizTitle">Î¤Î¹ Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î± Î±Ï€ÏŒ Ï„Î± McDonald's ÎµÎ¯ÏƒÎ±Î¹; <span class="sr-only">â€” Fun Personality Quiz</span></h1>
      <div class="sub">10 ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚ â€¢ 1â€“2â€²</div>
    </div>
    <div class="progress" aria-hidden="true"><span id="progressBar"></span></div>

    <section class="body" id="screen-start" hidden>
      <div class="start">
        <p>ÎšÎ¿Ï…Î¯Î¶ Î³Î¹Î± Î½Î± Î´Î¿ÏÎ¼Îµ Ï„Î¹ Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Ï€Î±Î¯ÏÎ½ÎµÎ¹Ï‚ Î±Ï€ÏŒ ÎœÎ±Îº</p>
        <div class="pill" id="countPill">0/10</div>
        <div>
          <button class="btn primary" id="btnStart">ÎÎµÎºÎ¯Î½Î±</button>
          <button class="btn ghost" id="btnShuffle">Î‘Î½Î±ÎºÎ¬Ï„ÎµÏˆÎµ ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚</button>
        </div>
      </div>
    </section>

    <section class="body" id="screen-quiz">
      <div class="pill" id="stepPill">Î•ÏÏÏ„Î·ÏƒÎ· 1 Î±Ï€ÏŒ 10</div>
      <div class="q-image" id="qImageWrap" hidden>
        <img id="qImage" alt="Î•Î¹ÎºÏŒÎ½Î± ÎµÏÏÏ„Î·ÏƒÎ·Ï‚" loading="lazy" />
      </div>
      <div class="question" id="questionText">â€¦</div>
      <div class="choices" id="choices"></div>
      <div class="controls">
        <div class="left">
          <button class="btn" id="btnBack">Î Î¯ÏƒÏ‰</button>
        </div>
        <div class="right">
          <button class="btn ghost" id="btnSkip">Î Î±ÏÎ¬Î»ÎµÎ¹ÏˆÎ·</button>
          <button class="btn primary" id="btnNext" disabled>Î•Ï€ÏŒÎ¼ÎµÎ½Î¿</button>
        </div>
      </div>
      <div class="footer-note">Tip: ÎœÏ€Î¿ÏÎµÎ¯Ï‚ Î½Î± Ï€Î±Ï„Î¬Ï‚ <kbd>â†</kbd>/<kbd>â†’</kbd> Î³Î¹Î± Ï€Î»Î¿Î®Î³Î·ÏƒÎ·.</div>
    </section>

    <section class="body" id="screen-result" hidden>
      <div class="result">
        <div class="hero" id="resultHero" hidden>
          <img id="resultImg" alt="Î•Î¹ÎºÏŒÎ½Î± Î±Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î¿Ï‚" loading="lazy" />
        </div>
        <h2 id="resultTitle">Î¤Î¿ Î±Ï€Î¿Ï„Î­Î»ÎµÏƒÎ¼Î± ÏƒÎ¿Ï…</h2>
        <p id="resultDesc">Î ÎµÏÎ¹Î³ÏÎ±Ï†Î® Î±Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î¿Ï‚.</p>
        <div class="badges" id="badges"></div>
        <div class="controls">
          <div class="left">
            <button class="btn" id="btnRestart">ÎÎ±Î½Î±Ï€Î±Î¯Î¾Îµ</button>
          </div>
          <div class="right">
            <button class="btn ghost" id="btnCopy">Î‘Î½Ï„Î¹Î³ÏÎ±Ï†Î® Î±Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î¿Ï‚</button>
            <button class="btn primary" id="btnShare">ÎšÎ¿Î¹Î½Î¿Ï€Î¿Î¯Î·ÏƒÎµ</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
  /* ========= HOW TO EDIT =========
   * 1) Î†Î»Î»Î±Î¾Îµ Ï„ÏÏ€Î¿Ï…Ï‚/ÎµÎ¹ÎºÏŒÎ½ÎµÏ‚ ÏƒÏ„Î± resultProfiles (img Ï€ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ).
   * 2) Î†Î»Î»Î±Î¾Îµ Ï„Î¹Ï‚ 10 ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚ ÏƒÏ„Î¿ questions (qImg/img Ï€ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÎ¬).
   * 3) Î¤Î¿ Telegram Î³Î¯Î½ÎµÏ„Î±Î¹ Î±Ï€ÏŒ Ï„Î¿ frontend (ÏŒÏ€Ï‰Ï‚ Î¶Î®Ï„Î·ÏƒÎµÏ‚).
   */

  // === 1) ÎŸÎ¡Î™Î£Î• Î¤ÎŸÎ¥Î£ Î¤Î¥Î ÎŸÎ¥Î£/Î‘Î ÎŸÎ¤Î•Î›Î•Î£ÎœÎ‘Î¤Î‘ ===
  const resultProfiles = {
  CLASSIC: {
    title: "Î— ÎšÎ»Î±ÏƒÎ¹ÎºÎ® Î ÏÎ¿ÏƒÏ†Î¿ÏÎ¬",
    desc: "All-time classic. Î£Ï„Î±Î¸ÎµÏÏŒÏ‚/Î®, Î±Î¾Î¹ÏŒÏ€Î¹ÏƒÏ„Î¿Ï‚/Î·, Ï„Î¯Î¼Î¹Î¿Ï‚/Î±, Î»Î¯Î³Î¿ Ï€ÏÎ¿Î²Î»Î­ÏˆÎ¹Î¼Î¿Ï‚/Î· â€” Î±Î»Î»Î¬ ÏŒÎ»Î¿Î¹ ÏƒÎµ Î±Î³Î±Ï€Î¬Î½Îµ.",
    badges: ["Comfort Food", "Î£Ï„Î±Î¸ÎµÏÏŒÏ„Î·Ï„Î±", "Î‘Ï€Î»ÏŒÏ„Î·Ï„Î±", "Î£Î¹Î³Î¿Ï…ÏÎ¹Î¬"],
    weight: 1.0,
    img: ""
  },
  MINIMAL: {
    title: "McNuggets 6-Ï„ÎµÎ¼ + ÎÎµÏÏŒ",
    desc: "Î¤ÏÎ­Ï†ÎµÏƒÎ±Î¹ ÎºÎ±Ï„Î¬ 90% Î¼Îµ ÎºÎ¿Ï„Î¿Î¼Ï€Î¿Ï…ÎºÎ¹Î­Ï‚ ÎºÎ±Î¹ Î³Î¹Î± ÎºÎ¬Ï€Î¿Î¹Î¿ Î»ÏŒÎ³Î¿ Ï€Î±ÏÎ¹ÏƒÏ„Î¬Î½ÎµÎ¹Ï‚ ÏŒÏ„Î¹ Î´ÎµÎ½ Ï€ÎµÎ¹Î½Î¬Ï‚",
    badges: ["Î‘Î´Î¹Î±Ï†Î¿ÏÎ¯Î±", "Î£Ï…Î³ÎºÏÎ¬Ï„Î·ÏƒÎ·", "ÎšÎ±Î¸Î±ÏÏŒÏ„Î·Ï„Î± (?)"],
    weight: 1.0,
    img: ""
  },
  FEAST: {
    title: "Î— Î Î»Î¿ÏÏƒÎ¹Î± Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±",
    desc: "Î”Î¹Ï€Î»ÏŒ burger, large Ï€Î±Ï„Î¬Ï„ÎµÏ‚, Î±Î½Î±ÏˆÏ…ÎºÏ„Î¹ÎºÏŒ, Î³Î»Ï…ÎºÎ¬ÎºÎ¹. Î¤Î¿ Î¶ÎµÎ¹Ï‚ ÏƒÏ„Î¿ Ï†Î¿Ï…Î».",
    badges: ["Î•Î¹Î»Î¹ÎºÏÎ¯Î½ÎµÎ¹Î±", "Î‘Ï€Î»Î¿Ï‡ÎµÏÎ¹Î¬", "Î ÎµÏÎ¹Ï„Ï„Î¬ ÎºÎ¹Î»Î¬"],
    weight: 1.0,
    img: "https://images.unsplash.com/photo-1550317138-10000687a72b?q=80&w=1600&auto=format&fit=crop"
  },
  NUGGETEER: {
    title: "ÎŸ Î£Î±Î»Ï„ÏƒÎ¬ÎºÎ¹Î±Ï‚",
    desc: "Î Î±Î¯ÏÎ½ÎµÎ¹Ï‚ nuggets ÎºÎ±Î¹ Ï€Î±Ï„Î¬Ï„ÎµÏ‚ Î³Î¹Î± Î½Î± Î´Î¿ÎºÎ¹Î¼Î¬ÏƒÎµÎ¹Ï‚ ÎŸÎ›Î•Î£ Ï„Î¹Ï‚ ÏƒÎ¬Î»Ï„ÏƒÎµÏ‚. Î•ÏÎµÏ…Î½Î·Ï„Î¹ÎºÏŒ Ï€Î½ÎµÏÎ¼Î± Î¼Îµ Î³ÎºÎ¿Ï…ÏÎ¼Î­ Ï„Î¬ÏƒÎµÎ¹Ï‚.",
    badges: ["Sauce Sommelier", "Î”Î¿ÎºÎ¹Î¼Î±ÏƒÏ„Î®Ï‚", "Î Î¿Î¹ÎºÎ¹Î»Î¯Î±", "Î‘Î½Î¿Î¹Ï‡Ï„ÏŒÏ‚ ÏƒÎµ Î½Î­Î± Ï€ÏÎ¬Î³Î¼Î±Ï„Î±", "ÎœÎ¬Î»Î»Î¿Î½ Î±ÏƒÏ„Î±Î¸Î®Ï‚ ÏƒÏ„Î¹Ï‚ ÏƒÏ‡Î­ÏƒÎµÎ¹Ï‚"],
    weight: 1.0,
    img: ""
  },
  SWEET: {
    title: "Î“Î»Ï…ÎºÎ±Ï„Î¶Î®Ï‚ McFlurry + ÎœÎ·Î»ÏŒÏ€Î¹Ï„Î±",
    desc: "Î–ÎµÎ¹Ï‚ Î³Î¹Î± Ï„Î¿ ÎµÏ€Î¹Î´ÏŒÏÏ€Î¹Î¿. Î–Î¬Ï‡Î±ÏÎ· ÎºÎ±Î¹ Ï‡Î±ÏÎ¬.",
    badges: ["Î“Î»Ï…ÎºÎ¹Î¬ ÏˆÏ…Ï‡Î®", "Î•Ï…Î±Î¯ÏƒÎ¸Î·Ï„Î¿Ï‚", "ÎšÎ±Î»ÏŒ Ï€Î±Î¹Î´Î¯"],
    weight: 1.0,
    img: ""
  },
  NIGHT: {
    title: "Î”Îµ Î¸Î­Î»Ï‰ ÎºÎ¬Ï„Î¹ Î­Ï†Î±Î³Î± ÏƒÏ€Î¯Ï„Î¹",
    desc: "Î”ÎµÎ½ Ï€Î±ÏÎ±Î³Î³Î­Î»Î½ÎµÎ¹Ï‚, Î±Î»Î»Î¬ ÏŒÎ»Î¿ ÎºÎ±Î¹ Î¸Î± Ï„ÏƒÎ¹Î¼Ï€Î®ÏƒÎµÎ¹Ï‚ ÎºÎ±Î¼Î¹Î¬ Ï€Î±Ï„Î¬Ï„Î± Î¼Î¿Ï…Î»Î¿Ï‡Ï„Î¬",
    badges: ["ÎÏ€Î¿Ï…Î»Î¿Ï‚", "ÎˆÎ»Î± Î¼ÏÏÎµ Î¼Î¹Î± Ï€Î±ÏÎ­Î± ÎµÎ¯Î¼Î±ÏƒÏ„Îµ", "Î‘Î½Î±Ï€Î¿Ï†Î¬ÏƒÎ¹ÏƒÏ„Î¿Ï‚"],
    weight: 1.0,
    img: ""
  },
};

  // === 2) 10 Î•Î¡Î©Î¤Î—Î£Î•Î™Î£ (placeholder) â€” Ï„ÏÏÎ± Î¼Îµ Ï€ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÎ­Ï‚ ÎµÎ¹ÎºÏŒÎ½ÎµÏ‚ ===
  const questions = [
  { q: "Î ÏŒÏ„Îµ ÏƒÎµ Ï€Î¹Î¬Î½ÎµÎ¹ Î· Î»Î¹Î³Î¿ÏÏÎ±;", qImg:"", choices:[
    { text:"ÎœÎµÏƒÎ·Î¼Î­ÏÎ¹, ÎºÎ»Î±ÏƒÎ¹ÎºÎ® ÏÏÎ± Î³ÎµÏÎ¼Î±Ï„Î¿Ï‚", type:"FEAST" },
    { text:"ÎŒÏ„Î±Î½ Î¸Ï…Î¼Î·Î¸Ï ÏŒÏ„Î¹ Î´ÎµÎ½ Î­Ï‡Ï‰ Ï†Î¬ÎµÎ¹", type:"MINIMAL" },
    { text:"Î Î¬Î½Ï„Î±. Î–Ï‰ Î¼Îµ ÎœÎ±Îº.", type:"CLASSIC" },
    { text:"ÎŒÏ„Î±Î½ Î²Î³ÎµÎ¹ Î½Î­Î± sauce", type:"NUGGETEER" },
    { text:"ÎœÏ€Î± Î´ÎµÎ½ Ï€ÎµÎ¹Î½Î¬Ï‰", type:"NIGHT" },
    { text:"ÎœÎµÏ„Î¬ Ï„Î¿ Ï†Î±Î³Î·Ï„ÏŒ", type:"SWEET" },
  ]},
  { q: "Î£Ï„Î¿ drive-thru Ï„Î¹ ÎºÎ¬Î½ÎµÎ¹Ï‚;", choices:[
    { text:"Î Î±Î¯ÏÎ½Ï‰ Ï„Î¿ ÏƒÏ…Î½Î·Î¸Î¹ÏƒÎ¼Î­Î½Î¿", type:"CLASSIC" },
    { text:"ÎœÎ¹Î± Î³ÏÎ®Î³Î¿ÏÎ· Î¼Ï€Î¿Ï…ÎºÎ¯Ï„ÏƒÎ± ÎºÎ±Î¹ Ï†ÎµÏÎ³Ï‰", type:"MINIMAL" },
    { text:"Î Î±Î¯ÏÎ½Ï‰ ÎºÎ±Î¹ Î³Î¹Î± Ï„Î¿Ï…Ï‚ Ï†Î¯Î»Î¿Ï…Ï‚, full ÏƒÎ±ÎºÎ¿ÏÎ»ÎµÏ‚", type:"FEAST" },
    { text:"Î¡Ï‰Ï„Î¬Ï‰ Ï€Î¿Î¹ÎµÏ‚ ÏƒÎ¬Î»Ï„ÏƒÎµÏ‚ Î­Ï‡Î¿Ï…Î½ ÏƒÎ®Î¼ÎµÏÎ±", type:"NUGGETEER" },
    { text:"Î¡Î¯Ï‡Î½Ï‰ Î¼Î¬Ï„Î¹ ÏƒÏ„Î± ÎµÏ€Î¹Î´ÏŒÏÏ€Î¹Î± Ï€ÏÏÏ„Î±", type:"SWEET" },
    { text:"Î•Î¯Î¼Î±Î¹ ÎµÎ´Ï Î³Î¹Î±Ï„Î¯ Î®Ï„Î±Î½ Î¿ Î¼ÏŒÎ½Î¿Ï‚ Î±Î½Î¿Î¹Ï‡Ï„ÏŒÏ‚", type:"NIGHT" },
  ]},
  { q: "ÎŒÏ„Î±Î½ Î±ÏÎ³ÎµÎ¯ Î· Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±;", choices:[
    { text:"Î ÎµÏÎ¹Î¼Î­Î½Ï‰ Î¼Îµ Î·ÏÎµÎ¼Î¯Î±", type:"CLASSIC" },
    { text:"Î”Îµ Î¼Î¿Ï… ÎºÎ¬Î½ÎµÎ¹ ÎµÎ½Ï„ÏÏ€Ï‰ÏƒÎ·", type:"MINIMAL" },
    { text:"ÎšÎ¬Î½Ï‰ Ï‡Î±Î¼ÏŒ", type:"FEAST" },
    { text:"Î¦Î¿Î²Î¬Î¼Î±Î¹ Î¼Î·Î½ ÎºÏÏ…ÏÏƒÎ¿Ï…Î½ Î¿Î¹ ÎºÎ¿Ï„Î¿Î¼Ï€Î¿Ï…ÎºÎ¹Î­Ï‚ ÎºÎ±Î¹ ÎµÎ¯Î½Î±Î¹ ÏƒÎ±Î½ ÏˆÎ¬ÏÎ¹", type:"NUGGETEER" },
    { text:"Î§Î±Î¯ÏÎ¿Î¼Î±Î¹ Î³Î¹Î±Ï„Î¯ Î¸Î± Ï†Î­ÏÎ¿Ï…Î½ Ï€Î±Î³Ï‰Ï„ÏŒ Ï„Î¶Î¬Î¼Ï€Î±", type:"SWEET" },
    { text:"ÎœÎµ Ï€Î±Î¯ÏÎ½ÎµÎ¹ Î¿ ÏÏ€Î½Î¿Ï‚", type:"NIGHT" },
  ]},
  { q: "Î Î±Ï„Î¬Ï„ÎµÏ‚;", choices:[
    { text:"Classic, Î¼Îµ Î»Î¯Î³Î¿ Î±Î»Î¬Ï„Î¹", type:"CLASSIC" },
    { text:"Small, Î³Î¹Î± Ï„Î·Î½ Ï„Î¹Î¼Î®", type:"MINIMAL" },
    { text:"Large + extra dip", type:"FEAST" },
    { text:"Î Î±Ï„Î¬Ï„ÎµÏ‚ Î¼ÏŒÎ½Î¿ Î³Î¹Î± Î½Î± Î²Î¿Ï…Ï„Î¬Ï‰ ÏƒÎ¬Î»Ï„ÏƒÎµÏ‚", type:"NUGGETEER" },
    { text:"Î Î±Ï„Î¬Ï„ÎµÏ‚ + Ï€Î±Î³Ï‰Ï„ÏŒ", type:"SWEET" },
    { text:"ÎŒ,Ï„Î¹ Î­Ï‡ÎµÎ¹ Î¼ÎµÎ¯Î½ÎµÎ¹ Ï„Î­Ï„Î¿Î¹Î± ÏÏÎ±", type:"NIGHT" },
  ]},
  { q: "Î¡ÏŒÏ†Î·Î¼Î±;", choices:[
    { text:"Î‘Î½Î±ÏˆÏ…ÎºÏ„Î¹ÎºÏŒ ÎºÎ»Î±ÏƒÎ¹ÎºÏŒ", type:"CLASSIC" },
    { text:"ÎÎµÏÏŒ/ÏƒÏŒÎ´Î±", type:"MINIMAL" },
    { text:"Milkshake Î® Î¼ÎµÎ³Î¬Î»Î¿ Î±Î½Î±ÏˆÏ…ÎºÏ„Î¹ÎºÏŒ", type:"FEAST" },
    { text:"ÎŸÏ„Î¹Î´Î®Ï€Î¿Ï„Îµ Ï„Î±Î¹ÏÎ¹Î¬Î¶ÎµÎ¹ Î¼Îµ Ï„Î· ÏƒÎ¬Î»Ï„ÏƒÎ±", type:"NUGGETEER" },
    { text:"ÎšÎ±Ï†Î­Ï‚ + McFlurry Î´Î¯Ï€Î»Î±", type:"SWEET" },
    { text:"ÎŒ,Ï„Î¹ Î¼Îµ ÎºÏÎ±Ï„Î¬ÎµÎ¹ Î¾ÏÏ€Î½Î¹Î¿", type:"NIGHT" },
  ]},
  { q: "Î‘Î½ Î®ÏƒÎ¿Ï…Î½ ÏƒÎ¬Î»Ï„ÏƒÎ±;", choices:[
    { text:"Ketchup, Î´Î¹Î±Ï‡ÏÎ¿Î½Î¹ÎºÎ®", type:"CLASSIC" },
    { text:"Î“Î»Ï…ÎºÏŒÎ¾Î¹Î½Î· ÎºÎ±Î¹ Î²Î±ÏƒÎ¹ÎºÎ¬ Î±Ï€Î»ÏÏ‚ Î¾Î¹Î½Î®", type:"MINIMAL" },
    { text:"Special sauce, Ï†Ï…ÏƒÎ¹ÎºÎ¬", type:"FEAST" },
    { text:"BBQ", type:"NUGGETEER" },
    { text:"Caramelâ€¦ Ï€Î¬Î½Ï‰ ÏƒÏ„Î¿ McFlurry", type:"SWEET" },
    { text:"Spicy", type:"NIGHT" },
  ]},
  { q: "Î ÏŒÏƒÎ¿ ÏƒÏ…Ï‡Î½Î¬ Î±Î»Î»Î¬Î¶ÎµÎ¹Ï‚ Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±;", choices:[
    { text:"Î£Ï€Î¬Î½Î¹Î±, Î­Ï‡Ï‰ Î±Î³Î±Ï€Î·Î¼Î­Î½Î·", type:"CLASSIC" },
    { text:"ÎŒ,Ï„Î¹ Ï€Î¹Î¿ Î³ÏÎ®Î³Î¿ÏÎ¿ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿", type:"MINIMAL" },
    { text:"Î”Î¿ÎºÎ¹Î¼Î¬Î¶Ï‰ ÏŒ,Ï„Î¹ Î½Î­Î¿ Î²Î³ÎµÎ¹", type:"FEAST" },
    { text:"Î‘Î½Î¬Î»Î¿Î³Î± Ï„Î· ÏƒÎ¬Î»Ï„ÏƒÎ±", type:"NUGGETEER" },
    { text:"Î‘Î½ Î­Ï‡ÎµÎ¹ Î½Î­Î¿ Î³Î»Ï…ÎºÏŒ", type:"SWEET" },
    { text:"Î”ÎµÎ½ Î­Ï‡Ï‰ ÎºÎ±Î¹ ÎµÏ€Î¹Î»Î¿Î³Î­Ï‚ ÏŒÏ„Î±Î½ Ï€Î¬Ï‰", type:"NIGHT" },
  ]},
  { q: "ÎšÎ¬Ï„Î¹ Î­Î½Î¿Ï‡Î¿ Ï€Î¿Ï… ÎºÎ¬Î½ÎµÎ¹Ï‚;", choices:[
    { text:"Î”Î¹Ï€Î»ÏŒ Ï„Ï…ÏÎ¯ ÏƒÏ„Î¿ cheeseburger", type:"CLASSIC" },
    { text:"Î Î±ÏÎ±Î³Î³Î­Î»Î½Ï‰ Î±Î»Î»Î¬ Ï„ÏÏÏ‰ Ï„Î¿ Î¼Î¹ÏƒÏŒ", type:"MINIMAL" },
    { text:"Burger+Ï€Î±Ï„Î¬Ï„ÎµÏ‚+Î³Î»Ï…ÎºÏŒ â€˜Î³Î¹Î± Î¼ÎµÏ„Î¬â€™", type:"FEAST" },
    { text:"Î’Î¿Ï…Ï„Î¬Ï‰ Ï€Î±Ï„Î¬Ï„ÎµÏ‚ ÏƒÎµ 3 ÏƒÎ¬Î»Ï„ÏƒÎµÏ‚", type:"NUGGETEER" },
    { text:"McFlurry+Î¼Î·Î»ÏŒÏ€Î¹Ï„Î± combo", type:"SWEET" },
    { text:"ÎœÎµÏ„Î±Î¼ÎµÏƒÎ¿Î½ÏÎºÏ„Î¹Î¿ Î´ÎµÏÏ„ÎµÏÎ¿ Î³ÏÏÎ¿", type:"NIGHT" },
  ]},
  { q: "ÎœÎµ Ï€Î¿Î¹Î¿ motto Ï€Î±ÏÎ±Î³Î³Î­Î»Î½ÎµÎ¹Ï‚;", choices:[
    { text:"Î‘Î½ Î´Î¿Ï…Î»ÎµÏÎµÎ¹, Î¼Î·Î½ Ï„Î¿ Î±Î»Î»Î¬Î¶ÎµÎ¹Ï‚", type:"CLASSIC" },
    { text:"Î“ÏÎ®Î³Î¿ÏÎ± ÎºÎ±Î¹ Î±Ï€Î»Î¬", type:"MINIMAL" },
    { text:"ÎŒÎ»Î± Î¼Î­ÏƒÎ±!", type:"FEAST" },
    { text:"Î”ÏÏƒÎµ Î¼Î¿Ï… ÎµÏ€Î¹Î»Î¿Î³Î­Ï‚ Î³Î¹Î± dips", type:"NUGGETEER" },
    { text:"Î ÏÏÏ„Î± Ï„Î¿ Î³Î»Ï…ÎºÏŒ", type:"SWEET" },
    { text:"Î¦Î±Î³Î·Ï„ÏŒ ÎºÎ±Î¹ ÏÏ€Î½Î¿", type:"NIGHT" },
  ]},
  { q: "ÎŒÏ„Î±Î½ ÏƒÎµ ÏÏ‰Ï„Î¬Î½Îµ â€˜Î¸Î± Ï€Î¬ÏÎµÎ¹Ï‚ ÎºÎ¬Ï„Î¹ Î¬Î»Î»Î¿;â€™", choices:[
    { text:"ÎŒÏ‡Î¹, ÎµÎ¯Î¼Î±Î¹ ÎºÎ¿Î¼Ï€Î»Î­", type:"CLASSIC" },
    { text:"ÎœÎ¹Î± Î¼Î¹ÎºÏÎ® Ï€Î±Ï„Î¬Ï„Î±", type:"MINIMAL" },
    { text:"ÎÎ±Î¹, Ï€ÏÏŒÏƒÎ¸ÎµÏƒÎµ ÎºÎ±Î¹â€¦", type:"FEAST" },
    { text:"ÎˆÏ‡ÎµÎ¹ ÎºÎ±Î¼Î¹Î¬ limited sauce;", type:"NUGGETEER" },
    { text:"ÎšÎ¬Ï„Î¹ Î³Î»Ï…ÎºÏŒ Î¼Î¹ÎºÏÏŒ", type:"SWEET" },
    { text:"Î¤Î¹ ÏÏÎ± ÎºÎ»ÎµÎ¯Î½ÎµÏ„Îµ;", type:"NIGHT" },
  ]},
];

  // ====== QUIZ ENGINE ======
  const state = {
    i: 0,
    selections: new Array(questions.length).fill(null),
    order: [...Array(questions.length).keys()],
    scores: Object.fromEntries(Object.keys(resultProfiles).map(k=>[k,0])),
  };

  const el = (id)=>document.getElementById(id);
  const screenStart = el('screen-start');
  const screenQuiz = el('screen-quiz');
  const screenResult = el('screen-result');
  const questionText = el('questionText');
  const qImageWrap = el('qImageWrap');
  const qImage = el('qImage');
  const choicesWrap = el('choices');
  const stepPill = el('stepPill');
  const countPill = el('countPill');
  const progressBar = el('progressBar');
  const btnStart = el('btnStart');
  const btnShuffle = el('btnShuffle');
  const btnBack = el('btnBack');
  const btnSkip = el('btnSkip');
  const btnNext = el('btnNext');
  const btnRestart = el('btnRestart');
  const btnCopy = el('btnCopy');
  const btnShare = el('btnShare');
  const resultTitle = el('resultTitle');
  const resultDesc = el('resultDesc');
  const badges = el('badges');
  const resultHero = el('resultHero');
  const resultImg = el('resultImg');

  // ====== TELEGRAM FRONTEND (DIRECT) ======
  // Î Î¡ÎŸÎ£ÎŸÎ§Î—: Î‘Ï…Ï„ÏŒ ÎµÎºÎ¸Î­Ï„ÎµÎ¹ Ï„Î¿ BOT TOKEN ÏƒÏ„Î¿ ÎºÎ¿Î¹Î½ÏŒ. Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎ­ Ï„Î¿ Î¼ÏŒÎ½Î¿ Î±Î½ Ï„Î¿ Î±Ï€Î¿Î´Î­Ï‡ÎµÏƒÎ±Î¹.
  const BOT_TOKEN = '7932574102:AAFQvlNoBw2AWpRuHO7DWlBnRWyA1DhOGuE'; // <-- Î’Î‘Î›Î¤ÎŸ
  const CHAT_ID   = '7336951445';             // <-- Î’Î‘Î›Î¤ÎŸ (user/group/channel id)
  const QUIZ_ID   = 'mcd-quiz-v1';

  function escapeMd(s=''){
    // Î ÏÏŒÏƒÎ¸ÎµÏƒÎµ backslash Ï€ÏÎ¹Î½ Î±Ï€ÏŒ markdown chars
    return s.replace(/([_*\[\]()~`>#+\-=|{}.!])/g, '\\$1');
  }

  function composeTelegramText(type, payload){
    const ts = new Date().toISOString();
    if (type==='start'){
      const lines = [
        `ğŸ§© *Quiz*: ${escapeMd(QUIZ_ID)}`,
        `â±ï¸ *Start*: ${escapeMd(ts)}`,
        `ğŸ’» *UA*: ${escapeMd(navigator.userAgent)}`,
      ];
      if (document.referrer) lines.push(`â†©ï¸ *Ref*: ${escapeMd(document.referrer)}`);
      return lines.join('\n');
    }
    if (type==='finish'){
      const { result, answers } = payload || {};
      const lines = [];
      lines.push(`ğŸ§© *Quiz*: ${escapeMd(QUIZ_ID)}`);
      lines.push(`â±ï¸ *Finish*: ${escapeMd(ts)}`);
      if (result) lines.push(`ğŸ” *Result*: *${escapeMd(result.title)}* (${escapeMd(result.key)})`);
      if (Array.isArray(answers)){
        lines.push('\nğŸ“ *Answers*');
        answers.forEach(a=>{
          const q = escapeMd(a.question);
          const ans = a.answer ? ` _${escapeMd(a.answer)}_` : ' _(skipped)_';
          lines.push(`â€¢ Q${a.step}. ${q}${ans}`);
        });
      }
      return lines.join('\n');
    }
    return '';
  }

  async function tgSend(text){
    try{
      // Î‘Î½ Î´ÎµÎ½ Î­Ï‡Î¿Ï…Î½ Î±Î»Î»Î±Ï‡Î¸ÎµÎ¯ Ï„Î± placeholders, Î¼Î·Î½ ÎºÎ¬Î½ÎµÎ¹Ï‚ ÎºÎ»Î®ÏƒÎ·
      if (!BOT_TOKEN || BOT_TOKEN.startsWith('PASTE_')) return;
      if (!CHAT_ID || CHAT_ID.startsWith('PASTE_')) return;
      const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
      await fetch(url, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ chat_id: CHAT_ID, text, parse_mode: 'Markdown', disable_web_page_preview: true }),
        keepalive: true,
      });
    }catch(e){ /* ignore */ }
  }

  function buildAnswers(){
    return state.order.map((qIdx, i)=>{
      const sel = state.selections[qIdx];
      return {
        step: i+1,
        index: qIdx,
        question: questions[qIdx].q,
        answer: sel!=null ? questions[qIdx].choices[sel].text : null,
        type: sel!=null ? questions[qIdx].choices[sel].type : null,
      };
    });
  }

  async function sendEvent(type, payload){
    const text = composeTelegramText(type, payload);
    if (text) await tgSend(text);
  }

  function showStart(){
    screenStart.hidden = false; screenQuiz.hidden = true; screenResult.hidden = true;
    countPill.textContent = `0/${questions.length}`;
    progressBar.style.width = '0%';
  }

  function showQuiz(){
    screenStart.hidden = true; screenQuiz.hidden = false; screenResult.hidden = true;
    renderQuestion();
  }

  function showResult(){
    screenStart.hidden = true; screenQuiz.hidden = false; // keep height, then hide
    screenQuiz.hidden = true; screenResult.hidden = false;
    // compute top type
    const scores = Object.entries(state.scores);
    scores.sort((a,b)=>{
      if (b[1]!==a[1]) return b[1]-a[1];
      const wa = resultProfiles[a[0]].weight ?? 1;
      const wb = resultProfiles[b[0]].weight ?? 1;
      if (wb!==wa) return wb - wa;
      return a[0].localeCompare(b[0]);
    });
    const [topKey] = scores[0];
    const profile = resultProfiles[topKey];
    resultTitle.textContent = `${profile.title}`;
    resultDesc.textContent = profile.desc;

    // Telegram: Î±Ï€Î¿ÏƒÏ„Î¿Î»Î® Ï„ÎµÎ»Î¹ÎºÎ¿Ï Î±Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î¿Ï‚ + Î±Ï€Î±Î½Ï„Î®ÏƒÎµÏ‰Î½
    sendEvent('finish', {
      result: { key: topKey, title: profile.title },
      scores: Object.fromEntries(scores),
      answers: buildAnswers(),
    });
    badges.innerHTML = '';
    (profile.badges || []).forEach(b=>{
      const span = document.createElement('span');
      span.className='pill'; span.textContent=b; badges.appendChild(span);
    });
    // hero image
    {
      const fallback = {
        CLASSIC: "img1.jpg",
        MINIMAL: "img2.jpg",
        FEAST: "img1.jpg",
        NUGGETEER: "img2.jpg",
        SWEET: "img1.jpg",
        NIGHT: "img2.jpg",
      };
      const src = profile.img && profile.img.trim()!=='' ? profile.img : (fallback[topKey] || fallback.CLASSIC);
      resultImg.src = src; resultHero.hidden = false;
    }
  }

  function renderQuestion(){
    const idx = state.order[state.i];
    const q = questions[idx];
    stepPill.textContent = `Î•ÏÏÏ„Î·ÏƒÎ· ${state.i+1} Î±Ï€ÏŒ ${questions.length}`;
    questionText.textContent = q.q;
    progressBar.style.width = `${(state.i)/questions.length * 100}%`;

    // question image
    if (q.qImg){ qImage.src = q.qImg; qImageWrap.hidden = false; }
    else { qImageWrap.hidden = true; qImage.removeAttribute('src'); }

    // choices
    choicesWrap.innerHTML='';
    q.choices.forEach((c, ci)=>{
      const label = document.createElement('label');
      label.className='choice';
      label.role='radio';
      label.tabIndex=0;
      label.setAttribute('aria-checked', state.selections[idx]===ci ? 'true':'false');
      label.addEventListener('click', ()=>selectChoice(ci));
      label.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); selectChoice(ci);} });

      const input = document.createElement('input');
      input.type = 'radio'; input.name = `q${idx}`; input.checked = state.selections[idx]===ci;

      const inner = document.createElement('div');
      inner.className = 'choice-text'; inner.textContent = c.text;

      label.appendChild(input);
      if (c.img){
        const thumb = document.createElement('div'); thumb.className='choice-thumb';
        const im = document.createElement('img'); im.loading='lazy'; im.src=c.img; im.alt=''; thumb.appendChild(im);
        label.appendChild(thumb);
      }
      label.appendChild(inner);
      choicesWrap.appendChild(label);
    });
    btnBack.disabled = state.i===0;
    btnNext.disabled = state.selections[idx]==null;
  }

  function selectChoice(ci){
    const qIndex = state.order[state.i];
    state.selections[qIndex] = ci;
    // update aria
    [...choicesWrap.children].forEach((node, i)=>node.setAttribute('aria-checked', i===ci ? 'true':'false'));
    btnNext.disabled = false;
  }

  function applyScores(){
    for (const k in state.scores) state.scores[k]=0;
    state.order.forEach((qIdx)=>{
      const sel = state.selections[qIdx];
      if (sel==null) return; // skipped
      const type = questions[qIdx].choices[sel].type;
      if (state.scores[type]==null) state.scores[type]=0;
      state.scores[type]++;
    });
  }

  function next(){
    if (state.i < questions.length-1){
      state.i++;
      renderQuestion();
    } else {
      applyScores();
      progressBar.style.width = '100%';
      showResult();
    }
  }
  function back(){
    if (state.i>0){ state.i--; renderQuestion(); }
  }
  function skip(){
    const qIndex = state.order[state.i];
    state.selections[qIndex] = null;
    next();
  }
  function restart(){
    state.i = 0;
    state.selections = new Array(questions.length).fill(null);
    state.order = [...Array(questions.length).keys()];
    state.scores = Object.fromEntries(Object.keys(resultProfiles).map(k=>[k,0]));
    badges.innerHTML='';
    showStart();
  }
  function shuffle(){
    for (let i=state.order.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [state.order[i], state.order[j]] = [state.order[j], state.order[i]];
    }
    countPill.textContent = `0/${questions.length}`;
  }

  // Sharing helpers
  async function copyResult(){
    const text = `${resultTitle.textContent} â€” ${resultDesc.textContent}`;
    try{ await navigator.clipboard.writeText(text); toast("Î‘Î½Ï„Î¹Î³ÏÎ¬Ï†Î·ÎºÎµ ÏƒÏ„Î¿ Ï€ÏÏŒÏ‡ÎµÎ¹ÏÎ¿ âœ…"); }
    catch{ toast("Î”ÎµÎ½ Î®Ï„Î±Î½ Î´Ï…Î½Î±Ï„Î® Î· Î±Î½Ï„Î¹Î³ÏÎ±Ï†Î®"); }
  }
  async function shareResult(){
    const text = `${resultTitle.textContent} â€” ${resultDesc.textContent}`;
    if (navigator.share){
      try{ await navigator.share({ title: 'Î¤Î¿ Î±Ï€Î¿Ï„Î­Î»ÎµÏƒÎ¼Î± Î¼Î¿Ï…', text }); }
      catch(e){ /* user canceled */ }
    } else {
      copyResult();
    }
  }

  // Tiny toast
  let toastTimer=null;
  function toast(msg){
    clearTimeout(toastTimer);
    let t = document.querySelector('#toast');
    if (!t){
      t = document.createElement('div');
      t.id='toast';
      t.style.cssText='position:fixed;left:50%;bottom:calc(24px + var(--safe-bottom));transform:translateX(-50%);padding:10px 14px;border-radius:12px;background:rgba(0,0,0,.7);color:white;font-weight:600;z-index:9999;box-shadow:var(--shadow)';
      document.body.appendChild(t);
    }
    t.textContent = msg; t.style.opacity='1';
    toastTimer = setTimeout(()=>{ t.style.opacity='0'; }, 1800);
  }

  // Init
  btnStart.addEventListener('click', ()=>{
    // Telegram: Î±Ï€Î¿ÏƒÏ„Î¿Î»Î® event Î­Î½Î±ÏÎ¾Î·Ï‚
    sendEvent('start', {
      userAgent: navigator.userAgent,
      referrer: document.referrer || null,
    });
    showQuiz();
  });
  btnShuffle.addEventListener('click', shuffle);
  btnBack.addEventListener('click', back);
  btnSkip.addEventListener('click', skip);
  btnNext.addEventListener('click', next);
  btnRestart.addEventListener('click', restart);
  btnCopy.addEventListener('click', copyResult);
  btnShare.addEventListener('click', shareResult);
  document.addEventListener('keydown', (e)=>{
    if (screenQuiz.hidden) return;
    if (e.key==='ArrowRight') next();
    if (e.key==='ArrowLeft') back();
  });

  // Self-tests (simple runtime checks)
  (function runSelfTests(){
    const tests = [];
    const assert = (name, cond)=>tests.push({name, ok: !!cond});
    // escapeMd
    assert('escapeMd underscores', escapeMd('a_b') === 'a\\_b');
    assert('escapeMd brackets', escapeMd('[x]') === '\\[x\\]');
    // composeTelegramText format
    const startText = composeTelegramText('start');
    assert('compose start returns string', typeof startText === 'string' && startText.length>0);
    const finishText = composeTelegramText('finish', { result:{key:'CLASSIC', title:'Î— ÎšÎ»Î±ÏƒÎ¹ÎºÎ® Î ÏÎ¿ÏƒÏ†Î¿ÏÎ¬'}, answers:[{step:1, question:'Q', answer:'A'}]});
    assert('compose finish returns string', typeof finishText === 'string' && finishText.includes('Result'));
    // No unescaped multiline literals at runtime (cannot directly test parse errors)
    console.log('[Quiz Self-Tests]', tests.map(t=>`${t.ok?'âœ…':'âŒ'} ${t.name}`).join(' | '));
  })();

  // Start on load
  showStart();
  </script>
</body>
</html>


