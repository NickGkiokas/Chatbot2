<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>University Portal 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #3f51b5; --accent: #ff4081; --bg: #f5f7fa; --text: #2c3e50;
            --success: #00c853; --danger: #d50000; --card: #ffffff;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: 'Poppins', sans-serif; background: var(--bg); height: 100vh; display: flex; justify-content: center; overflow: hidden; color: var(--text); }

        .app-container {
            width: 100%; max-width: 480px; height: 100%; background: var(--bg);
            position: relative; display: flex; flex-direction: column; box-shadow: 0 0 30px rgba(0,0,0,0.1);
        }

        /* --- LOGIN SCREEN --- */
        #screen-login {
            position: absolute; top:0; left:0; width:100%; height:100%; z-index: 500;
            background: linear-gradient(135deg, #3f51b5 0%, #303f9f 100%);
            display: flex; flex-direction: column; align-items: center; justify-content: center; color: white;
        }
        .login-box { background: white; padding: 30px; border-radius: 20px; width: 85%; text-align: center; color: #333; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .login-input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; margin: 15px 0; font-size: 16px; outline: none; }
        .login-btn { width: 100%; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 16px; }

        /* --- HEADER & NAV --- */
        .header { background: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05); z-index: 50; }
        .header h1 { margin: 0; font-size: 18px; color: var(--primary); }
        .avatar { width: 35px; height: 35px; background: #eee; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; color: #555; }

        /* --- MAIN CONTENT --- */
        .content-area { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 80px; }
        
        .progress-container { margin-bottom: 20px; background: white; padding: 15px; border-radius: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .progress-bar-bg { width: 100%; height: 8px; background: #eee; border-radius: 4px; overflow: hidden; margin-top: 8px; }
        .progress-bar-fill { height: 100%; background: var(--success); width: 0%; transition: width 0.5s; }

        .course-card { background: white; padding: 20px; border-radius: 16px; margin-bottom: 15px; display: flex; align-items: center; gap: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.03); cursor: pointer; position: relative; }
        .course-card:active { transform: scale(0.98); }
        .icon { width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0; }
        .c-purple { background: #e8eaf6; color: #3f51b5; }
        .c-orange { background: #fff3e0; color: #ef6c00; }
        .c-green { background: #e8f5e9; color: #2e7d32; }
        .c-red { background: #ffebee; color: #c62828; }

        /* Locked Exam Style */
        .exam-locked { opacity: 0.6; pointer-events: none; filter: grayscale(1); }
        .lock-icon { position: absolute; right: 20px; font-size: 20px; }

        /* --- SCREENS --- */
        .screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 100; transform: translateX(100%); transition: transform 0.3s; display: flex; flex-direction: column; }
        .screen.active { transform: translateX(0); }
        .screen-header { background: white; padding: 15px; display: flex; align-items: center; gap: 15px; border-bottom: 1px solid #eee; }
        .back-btn { background: none; border: none; font-size: 22px; cursor: pointer; color: var(--primary); }

        /* --- DOC VIEWER --- */
        .doc-content { padding: 25px; font-family: 'Georgia', serif; line-height: 1.6; background: white; min-height: 100%; }
        .slide-container { background: #333; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .slide-card { background: white; width: 100%; aspect-ratio: 16/9; border-radius: 10px; padding: 20px; display: flex; flex-direction: column; justify-content: center; text-align: center; margin-bottom: 20px; }
        .slide-btn { background: rgba(255,255,255,0.2); border: 1px solid white; color: white; width: 50px; height: 50px; border-radius: 50%; margin: 0 10px; cursor: pointer; }

        /* --- EXAM UI --- */
        .timer-badge { background: #d32f2f; color: white; padding: 5px 12px; border-radius: 20px; font-size: 14px; font-weight: bold; margin-left: auto; }
        .question-box { background: white; padding: 20px; border-radius: 12px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .radio-label { display: block; padding: 10px; border: 1px solid #eee; border-radius: 8px; margin-top: 8px; cursor: pointer; }
        .radio-label input { margin-right: 10px; }
        
        /* --- TELEGRAM --- */
        .portal { background: white; padding: 20px; margin-top: 20px; border-radius: 12px; border-left: 4px solid var(--primary); }
        .portal textarea { width: 100%; border: 1px solid #ddd; border-radius: 8px; padding: 10px; margin: 10px 0; height: 70px; }
        .send-btn { background: var(--primary); color: white; border: none; padding: 10px; width: 100%; border-radius: 8px; cursor: pointer; }

        /* --- MODALS & ALERTS --- */
        .overlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.9); z-index: 1000; display: none; align-items: center; justify-content: center; flex-direction: column; }
        .alert-box { background: white; width: 80%; padding: 25px; border-radius: 15px; text-align: center; }
        .toast { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); background: #333; color: white; padding: 10px 20px; border-radius: 20px; opacity: 0; transition: 0.3s; pointer-events: none; z-index: 200; }
        .toast.show { opacity: 1; bottom: 100px; }
    </style>
</head>
<body>

<div class="app-container">

    <div id="screen-login">
        <div style="font-size: 60px; margin-bottom: 20px;">ğŸ“</div>
        <h2 style="margin:0;">Academic Portal</h2>
        <p style="opacity:0.8;">Î•Î¯ÏƒÎ¿Î´Î¿Ï‚ Î¦Î¿Î¹Ï„Î·Ï„Î®</p>
        <div class="login-box">
            <input type="text" class="login-input" placeholder="ÎŒÎ½Î¿Î¼Î± Î§ÏÎ®ÏƒÏ„Î·" value="Student">
            <input type="password" class="login-input" placeholder="ÎšÏ‰Î´Î¹ÎºÏŒÏ‚ (Î¿Ï„Î¹Î´Î®Ï€Î¿Ï„Îµ)">
            <button class="login-btn" onclick="login()">Î•Î™Î£ÎŸÎ”ÎŸÎ£</button>
        </div>
        <div style="margin-top: 20px; font-size: 12px; opacity: 0.6;">System Version 4.2.0</div>
    </div>

    <div id="screen-home" style="display: flex; flex-direction: column; height: 100%;">
        <div class="header">
            <h1>MyStudies</h1>
            <div class="avatar">EG</div>
        </div>

        <div class="content-area">
            <div class="progress-container">
                <div style="display:flex; justify-content:space-between; font-size:12px; font-weight:600;">
                    <span>Î ÏÏŒÎ¿Î´Î¿Ï‚ ÎœÎµÎ»Î­Ï„Î·Ï‚</span>
                    <span id="progress-text">0%</span>
                </div>
                <div class="progress-bar-bg">
                    <div class="progress-bar-fill" id="progress-fill"></div>
                </div>
                <div style="font-size:11px; color:#666; margin-top:5px;">*Î ÏÎ­Ï€ÎµÎ¹ Î½Î± Ï†Ï„Î¬ÏƒÎµÎ¹Ï‚ 100% Î³Î¹Î± Î½Î± Î¾ÎµÎºÎ»ÎµÎ¹Î´ÏÏƒÎµÎ¹ Î· ÎµÎ¾Î­Ï„Î±ÏƒÎ·.</div>
            </div>

            <div class="course-card" onclick="openCourse(1)">
                <div class="icon c-purple">ğŸ§˜â€â™€ï¸</div>
                <div>
                    <div style="font-weight:600;">Î˜ÎµÏ‰ÏÎ¯Î± Î¥Ï€Î¿Î¼Î¿Î½Î®Ï‚</div>
                    <div style="font-size:12px; color:#777;">Î¥Ï€Î¿Ï‡ÏÎµÏ‰Ï„Î¹ÎºÏŒ â€¢ 2 Î‘ÏÏ‡ÎµÎ¯Î±</div>
                </div>
            </div>

            <div class="course-card" onclick="openCourse(2)">
                <div class="icon c-orange">ğŸ˜¶</div>
                <div>
                    <div style="font-weight:600;">Î£Ï„ÏÎ±Ï„Î·Î³Î¹ÎºÎ­Ï‚ Î£Î¹Ï‰Ï€Î®Ï‚</div>
                    <div style="font-size:12px; color:#777;">Î•ÏÎ³Î±ÏƒÏ„Î®ÏÎ¹Î¿ â€¢ 2 Î‘ÏÏ‡ÎµÎ¯Î±</div>
                </div>
            </div>

            <div class="course-card" onclick="openCourse(3)">
                <div class="icon c-green">ğŸ¤¥</div>
                <div>
                    <div style="font-weight:600;">Î‘Î½Î¬Î»Ï…ÏƒÎ· Î”Î¹ÎºÎ±Î¹Î¿Î»Î¿Î³Î¹ÏÎ½</div>
                    <div style="font-size:12px; color:#777;">Î˜ÎµÏ‰ÏÎ¯Î± â€¢ 1 Î‘ÏÏ‡ÎµÎ¯Î¿</div>
                </div>
            </div>

            <hr style="border:0; border-top:1px dashed #ddd; margin: 20px 0;">

            <div id="exam-card" class="course-card exam-locked" onclick="tryOpenExam()">
                <div class="icon c-red">âš ï¸</div>
                <div style="flex:1;">
                    <div style="font-weight:600; color:#c62828;">Î¤Î•Î›Î™ÎšÎ— Î•ÎÎ•Î¤Î‘Î£Î—</div>
                    <div style="font-size:12px; color:#c62828;">Î¥Ï€ÏŒ Ï†ÏŒÎ²Î¿ Ï„Î¹Î¼Ï‰ÏÎ¯Î±Ï‚</div>
                </div>
                <div class="lock-icon" id="exam-icon">ğŸ”’</div>
            </div>
        </div>
    </div>

    <div id="screen-course" class="screen">
        <div class="screen-header">
            <button class="back-btn" onclick="closeScreen('screen-course')">â®</button>
            <b id="c-title">Î¤Î¯Ï„Î»Î¿Ï‚</b>
        </div>
        <div class="content-area">
            <p id="c-desc" style="font-size:14px; color:#555; margin-bottom:20px;"></p>
            <div style="font-weight:bold; margin-bottom:10px;">Î¥Î»Î¹ÎºÏŒ Ï€ÏÎ¿Ï‚ Î¼ÎµÎ»Î­Ï„Î·:</div>
            <div id="file-list"></div>

            <div class="portal">
                <div style="font-weight:bold; font-size:14px;">ğŸ’¬ Î‘Ï€Î¿ÏÎ¯ÎµÏ‚ (Telegram)</div>
                <textarea id="tg-msg" placeholder="Î£Ï„ÎµÎ¯Î»Îµ Ï„Î·Î½ Î±Ï€Î¿ÏÎ¯Î± ÏƒÎ¿Ï…..."></textarea>
                <button class="send-btn" onclick="sendTelegram()">Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î®</button>
            </div>
        </div>
    </div>

    <div id="screen-viewer" class="screen">
        </div>

    <div id="screen-exam-intro" class="screen">
        <div class="screen-header"><button class="back-btn" onclick="closeScreen('screen-exam-intro')">âœ•</button><b>ÎšÎ±Î½ÏŒÎ½ÎµÏ‚</b></div>
        <div class="content-area" style="text-align:center;">
            <div style="font-size:50px; margin:20px;">ğŸ“œ</div>
            <h2>Î£Ï…Î¼Î²ÏŒÎ»Î±Î¹Î¿ Î¤Î¹Î¼Î®Ï‚</h2>
            <p style="font-size:14px; padding:0 20px;">Î”Î·Î»ÏÎ½Ï‰ Ï…Ï€ÎµÏÎ¸Ï…Î½Î± ÏŒÏ„Î¹ Î­Ï‡Ï‰ Î¼ÎµÎ»ÎµÏ„Î®ÏƒÎµÎ¹ ÎºÎ±Î¹ Î±Ï€Î¿Î´Î­Ï‡Î¿Î¼Î±Î¹ Ï„Î¹Ï‚ ÏƒÏ…Î½Î­Ï€ÎµÎ¹ÎµÏ‚ (Ï„Î¹Î¼Ï‰ÏÎ¯ÎµÏ‚) ÏƒÎµ Ï€ÎµÏÎ¯Ï€Ï„Ï‰ÏƒÎ· Î±Ï€Î¿Ï„Ï…Ï‡Î¯Î±Ï‚.</p>
            
            <div style="background:#fff3e0; padding:15px; margin:20px 0; border-radius:10px; font-size:13px; text-align:left;">
                <strong>âš ï¸ Î Î¡ÎŸÎ£ÎŸÎ§Î—:</strong><br>
                1. ÎˆÏ‡ÎµÎ¹Ï‚ <strong>60 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±</strong>.<br>
                2. Î‘Î½ Î²Î³ÎµÎ¹Ï‚ Î±Ï€ÏŒ Ï„Î·Î½ ÎµÏ†Î±ÏÎ¼Î¿Î³Î® (alt-tab/home), <strong>Î¼Î·Î´ÎµÎ½Î¯Î¶ÎµÏƒÎ±Î¹</strong>.<br>
                3. Î— Î±Ï€Î¿Ï„Ï…Ï‡Î¯Î± Ï†Î­ÏÎ½ÎµÎ¹ Ï€Î»ÏÏƒÎ¹Î¼Î¿ Ï€Î¹Î¬Ï„Ï‰Î½.
            </div>

            <button class="send-btn" style="background:#d32f2f; padding:15px; font-size:16px;" onclick="startExam()">Î‘Î ÎŸÎ”ÎŸÎ§Î— & Î•ÎÎ‘Î¡ÎÎ—</button>
        </div>
    </div>

    <div id="screen-quiz" class="screen">
        <div class="screen-header">
            <b>Î•Î¾Î­Ï„Î±ÏƒÎ·</b>
            <div id="timer" class="timer-badge">01:00</div>
        </div>
        <div class="content-area" id="quiz-content">
            </div>
    </div>

    <div id="overlay-result" class="overlay">
        <div class="alert-box">
            <div id="res-icon" style="font-size:50px;"></div>
            <h2 id="res-title"></h2>
            <p id="res-msg"></p>
            <div id="res-pen" style="background:#eee; padding:10px; border-radius:8px; margin-top:10px; font-weight:bold;"></div>
            <button class="send-btn" style="margin-top:20px; background:#333;" onclick="location.reload()">Î¤Î•Î›ÎŸÎ£</button>
        </div>
    </div>

    <div id="overlay-cheat" class="overlay" style="background:rgba(200,0,0,0.9);">
        <div class="alert-box">
            <div style="font-size:50px;">ğŸ‘ï¸</div>
            <h2 style="color:#d32f2f;">Î£Î• Î•Î™Î”Î‘!</h2>
            <p>Î ÏÎ¿ÏƒÏ€Î¬Î¸Î·ÏƒÎµÏ‚ Î½Î± Î²Î³ÎµÎ¹Ï‚ Î±Ï€ÏŒ Ï„Î·Î½ ÎµÏ†Î±ÏÎ¼Î¿Î³Î® Î³Î¹Î± Î½Î± Î±Î½Ï„Î¹Î³ÏÎ¬ÏˆÎµÎ¹Ï‚;</p>
            <p style="font-weight:bold;">Î— ÎµÎ¾Î­Ï„Î±ÏƒÎ· Î±ÎºÏ…ÏÏÎ½ÎµÏ„Î±Î¹.</p>
            <button class="send-btn" style="margin-top:20px; background:#333;" onclick="location.reload()">Î£Ï…Î³Î³Î½ÏÎ¼Î·...</button>
        </div>
    </div>

    <div id="toast" class="toast">ÎœÎ®Î½Ï…Î¼Î±</div>

</div>

<script>
    // --- SETTINGS (Î’Î‘Î›Î• Î¤Î‘ Î”Î™ÎšÎ‘ Î£ÎŸÎ¥) ---
    const TG_TOKEN = "7932574102:AAFQvlNoBw2AWpRuHO7DWlBnRWyA1DhOGuE";
    const TG_CHAT = "7336951445";

    // --- DATA ---
    const courses = {
        1: { title: "Î˜ÎµÏ‰ÏÎ¯Î± Î¥Ï€Î¿Î¼Î¿Î½Î®Ï‚", desc: "ÎœÎ¬Î¸Î·Î¼Î± ÎºÎ¿ÏÎ¼Î¿Ï.", files: [
            {id: "f1", title: "Î”Î¹Î¬Î»ÎµÎ¾Î· 1: Zen", type: "slide", content: [{t:"Î¥Î ÎŸÎœÎŸÎÎ—", b:"ÎœÎ·Î½ ÏÏ‰Ï„Î¬Ï‚ Ï€ÏŒÏ„Îµ Ï†Ï„Î¬Î½Î¿Ï…Î¼Îµ."},{t:"Î‘ÎÎ‘Î ÎÎŸÎ•Î£", b:"Î•Î¹ÏƒÏ€Î½Î¿Î® - Î•ÎºÏ€Î½Î¿Î®."}]},
            {id: "f2", title: "Î†ÏÎ¸ÏÎ¿: Î‘Î½Î±Î¼Î¿Î½Î®", type: "doc", content: "Î— Ï…Ï€Î¿Î¼Î¿Î½Î® ÎµÎ¯Î½Î±Î¹ Î±ÏÎµÏ„Î®. ÎŸ Î“ÎºÎ¹ÏÎºÎ±Ï‚ Î­Ï‡ÎµÎ¹ Ï€Î¬Î½Ï„Î± Î´Î¯ÎºÎ¹Î¿."}
        ]},
        2: { title: "Î£Ï„ÏÎ±Ï„Î·Î³Î¹ÎºÎ­Ï‚ Î£Î¹Ï‰Ï€Î®Ï‚", desc: "Î ÏŒÏ„Îµ Î¼Î¹Î»Î¬Î¼Îµ;", files: [
            {id: "f3", title: "ÎšÎ±Î½ÏŒÎ½ÎµÏ‚", type: "doc", content: "Î£Ï„Î¿ 90' Î´ÎµÎ½ Î¼Î¹Î»Î¬Î¼Îµ. Î£Ï„Î¹Ï‚ Î´Î¹Î±Ï†Î·Î¼Î¯ÏƒÎµÎ¹Ï‚ Î¼Î¹Î»Î¬Î¼Îµ."},
            {id: "f4", title: "Î¤Î¿ ÎÎ‘Î™", type: "slide", content: [{t:"ÎœÎ‘Î“Î™ÎšÎ— Î›Î•ÎÎ—", b:"Î ÎµÏ‚ ÎÎ‘Î™ ÏƒÎµ ÏŒÎ»Î±."}]}
        ]},
        3: { title: "Î‘Î½Î¬Î»Ï…ÏƒÎ· Î”Î¹ÎºÎ±Î¹Î¿Î»Î¿Î³Î¹ÏÎ½", desc: "Top Fails", files: [
            {id: "f5", title: "Î”Î¹ÎºÎ±Î¹Î¿Î»Î¿Î³Î¯ÎµÏ‚ 2024", type: "doc", content: "'Î”ÎµÎ½ Ï„Î¿ Î¬ÎºÎ¿Ï…ÏƒÎ±' = Î¨Î•ÎœÎ‘."}
        ]}
    };

    // --- STATE ---
    let viewedFiles = new Set();
    const totalFiles = 5; // f1 to f5
    let currentSlides = [];
    let slideIdx = 0;
    let examInterval;
    let cheatListener;

    // --- LOGIN ---
    function login() {
        document.getElementById('screen-login').style.display = 'none';
    }

    // --- NAVIGATION ---
    function openCourse(id) {
        const c = courses[id];
        document.getElementById('c-title').innerText = c.title;
        document.getElementById('c-desc').innerText = c.desc;
        const list = document.getElementById('file-list');
        list.innerHTML = '';
        c.files.forEach(f => {
            const isViewed = viewedFiles.has(f.id);
            list.innerHTML += `
            <div onclick='openFile("${id}", "${f.id}")' style="background:#fff; padding:15px; border:1px solid ${isViewed?'#4caf50':'#eee'}; border-radius:8px; margin-bottom:10px; display:flex; align-items:center; cursor:pointer;">
                <div style="font-size:20px; margin-right:10px;">${f.type==='slide'?'ğŸ“Š':'ğŸ“„'}</div>
                <div style="flex:1;">
                    <div style="font-weight:600; font-size:14px;">${f.title}</div>
                    <div style="font-size:11px; color:#888;">${isViewed ? 'âœ… ÎŸÎ»Î¿ÎºÎ»Î·ÏÏÎ¸Î·ÎºÎµ' : 'â³ Î ÏÎ¿Ï‚ Î¼ÎµÎ»Î­Ï„Î·'}</div>
                </div>
            </div>`;
        });
        document.getElementById('screen-course').classList.add('active');
    }

    function closeScreen(id) { document.getElementById(id).classList.remove('active'); }

    // --- VIEWER & PROGRESS ---
    function openFile(cId, fId) {
        const file = courses[cId].files.find(f => f.id === fId);
        const screen = document.getElementById('screen-viewer');
        
        if(file.type === 'doc') {
            screen.innerHTML = `<div class="screen-header"><button class="back-btn" onclick="closeViewer()">âœ•</button><b>ÎˆÎ³Î³ÏÎ±Ï†Î¿</b></div><div class="doc-content">${file.content}</div>`;
        } else {
            currentSlides = file.content; slideIdx = 0;
            renderSlides();
        }
        screen.classList.add('active');
        
        // Mark as viewed after 1 second
        setTimeout(() => {
            if(!viewedFiles.has(fId)) {
                viewedFiles.add(fId);
                updateProgress();
                openCourse(cId); // Refresh list UI
            }
        }, 1000);
    }

    function renderSlides() {
        const s = currentSlides[slideIdx];
        document.getElementById('screen-viewer').innerHTML = `
        <div class="slide-container">
            <div class="slide-card"><h2>${s.t}</h2><p>${s.b}</p></div>
            <div>
                <button class="slide-btn" onclick="prevS()">â®</button>
                <span style="color:white">${slideIdx+1}/${currentSlides.length}</span>
                <button class="slide-btn" onclick="nextS()">â¯</button>
            </div>
            <button style="margin-top:20px; background:transparent; color:white; border:none;" onclick="closeViewer()">ÎšÎ›Î•Î™Î£Î™ÎœÎŸ</button>
        </div>`;
    }
    function nextS() { if(slideIdx < currentSlides.length-1) { slideIdx++; renderSlides(); }}
    function prevS() { if(slideIdx > 0) { slideIdx--; renderSlides(); }}
    function closeViewer() { document.getElementById('screen-viewer').classList.remove('active'); }

    function updateProgress() {
        const pct = Math.round((viewedFiles.size / totalFiles) * 100);
        document.getElementById('progress-text').innerText = pct + "%";
        document.getElementById('progress-fill').style.width = pct + "%";
        
        if(pct === 100) {
            const card = document.getElementById('exam-card');
            card.classList.remove('exam-locked');
            document.getElementById('exam-icon').innerText = "ğŸ”“";
        }
    }

    // --- EXAM LOGIC ---
    function tryOpenExam() {
        if(viewedFiles.size < totalFiles) {
            showToast("ğŸ”’ Î ÏÎ­Ï€ÎµÎ¹ Î½Î± Î´Î¹Î±Î²Î¬ÏƒÎµÎ¹Ï‚ ÏŒÎ»Î± Ï„Î± Î±ÏÏ‡ÎµÎ¯Î± Ï€ÏÏÏ„Î±!");
        } else {
            document.getElementById('screen-exam-intro').classList.add('active');
        }
    }

    function startExam() {
        // Activate Anti-Cheat
        document.addEventListener("visibilitychange", handleCheat);
        
        // Build Quiz
        const qHTML = `
            ${qDiv(1, "Î‘Î½ Î¶Î·Ï„Î®ÏƒÏ‰ Ï‡Î¬ÏÎ· ÎºÎ±Î¹ Ï€ÎµÎ¹Ï‚ ÏŒÏ‡Î¹;", ["Î“ÎºÏÎ¯Î½Î¹Î±", "Î¥Ï€Î±ÎºÎ¿Î® (Î£Ï‰ÏƒÏ„ÏŒ)", "ÎœÎ¿ÏÏ„ÏÎ±"], 1)}
            ${qDiv(2, "Î Î¿Î¹Î¿Ï‚ Î´Î¹Î±Î»Î­Î³ÎµÎ¹ Ï†Î±Î³Î·Ï„ÏŒ;", ["Î•ÏƒÏ", "Î•Î³Ï (Î“ÎºÎ¹ÏÎºÎ±Ï‚) (Î£Ï‰ÏƒÏ„ÏŒ)"], 1)}
            ${qDiv(3, "Î¤Î¹ ÏÏÎ± ÎµÎ¯Î½Î±Î¹ Ï„Î¿ '5 Î»ÎµÏ€Ï„Î¬';", ["30 Î»ÎµÏ€Ï„Î¬", "5 Î»ÎµÏ€Ï„Î¬ (Î£Ï‰ÏƒÏ„ÏŒ)"], 1)}
            ${qDiv(4, "Î‘Î½ Ï‡Î¬ÏƒÎµÎ¹ Î· Î¿Î¼Î¬Î´Î± Î¼Î¿Ï…;", ["Î£Îµ ÎºÎ¿ÏÎ¿ÏŠÎ´ÎµÏÏ‰", "Î£Î¹Ï‰Ï€Î® (Î£Ï‰ÏƒÏ„ÏŒ)"], 1)}
            ${qDiv(5, "ÎœÎµ Î±Î³Î±Ï€Î¬Ï‚;", ["Î Î¿Î»Ï (Î£Ï‰ÏƒÏ„ÏŒ)", "Î›Î¯Î³Î¿"], 0)}
            <button class="send-btn" style="background:#d32f2f; margin-top:20px;" onclick="finishExam()">Î¥Î ÎŸÎ’ÎŸÎ›Î—</button>
        `;
        document.getElementById('quiz-content').innerHTML = qHTML;
        document.getElementById('screen-quiz').classList.add('active');

        // Timer
        let timeLeft = 60;
        const timerDisplay = document.getElementById('timer');
        examInterval = setInterval(() => {
            timeLeft--;
            timerDisplay.innerText = `00:${timeLeft < 10 ? '0'+timeLeft : timeLeft}`;
            if(timeLeft <= 0) {
                clearInterval(examInterval);
                finishExam(true); // Force finish
            }
        }, 1000);
    }

    function qDiv(id, t, o, c) {
        let h = `<div class="question-box"><b>${id}. ${t}</b>`;
        o.forEach((Op, i) => {
            let val = (i===c || id===5) ? 2 : 0;
            h += `<label class="radio-label"><input type="radio" name="q${id}" value="${val}"> ${Op}</label>`;
        });
        return h + `</div>`;
    }

    function handleCheat() {
        if (document.visibilityState === 'hidden') {
            document.getElementById('overlay-cheat').style.display = 'flex';
            clearInterval(examInterval);
        }
    }

    function finishExam(forced = false) {
        clearInterval(examInterval);
        document.removeEventListener("visibilitychange", handleCheat);

        let score = 0;
        for(let i=1; i<=5; i++) {
            document.getElementsByName(`q${i}`).forEach(el => { if(el.checked) score += parseInt(el.value); });
        }
        if(forced) score = 0; // Penalty for timeout

        const ov = document.getElementById('overlay-result');
        const ic = document.getElementById('res-icon');
        const ti = document.getElementById('res-title');
        const ms = document.getElementById('res-msg');
        const pe = document.getElementById('res-pen');

        ov.style.display = 'flex';
        
        if(score >= 9) {
            ic.innerText = "ğŸ†"; ti.innerText = "Î‘Î¡Î™Î£Î¤Î‘ (10/10)"; ti.style.color = "green";
            ms.innerText = "Î•Î¯ÏƒÎ±Î¹ Ï„Î­Î»ÎµÎ¹Î±."; pe.innerText = "ğŸ Î”Î¹Î¬Î»ÎµÎ¾Îµ Ï†Î±Î³Î·Ï„ÏŒ!"; pe.style.background = "#e8f5e9"; pe.style.color = "green";
        } else if(score >= 7) {
            ic.innerText = "ğŸ‘"; ti.innerText = "ÎšÎ‘Î›Î‘ (7-8)"; ti.style.color = "green";
            ms.innerText = "ÎŸÎº, ÎºÎ±Î»Î¬ Ï€Î®Î³Îµ."; pe.innerText = "ğŸ¬ ÎšÎµÏÎ´Î¯Î¶ÎµÎ¹Ï‚ ÏƒÎ¿ÎºÎ¿Î»Î¬Ï„Î±.";
        } else if(score >= 3) {
            ic.innerText = "ğŸ§¹"; ti.innerText = "Î‘Î ÎŸÎ¤Î¥Î§Î™Î‘"; ti.style.color = "orange";
            ms.innerText = "Î‘Ï€Î»Î® Î¤Î¹Î¼Ï‰ÏÎ¯Î±."; pe.innerText = "âš ï¸ Î Î»ÏÏƒÎ¹Î¼Î¿ Ï€Î¹Î¬Ï„Ï‰Î½ ÏƒÎ®Î¼ÎµÏÎ±."; pe.style.background = "#fff3e0"; pe.style.color = "#ef6c00";
        } else {
            ic.innerText = "ğŸ’€"; ti.innerText = "Î‘Î Î‘Î¡Î‘Î”Î•ÎšÎ¤Î—"; ti.style.color = "red";
            ms.innerText = "ÎœÎ·Î´Î­Î½Î¹ÏƒÎµÏ‚ Î® Ï„ÎµÎ»ÎµÎ¯Ï‰ÏƒÎµ Î¿ Ï‡ÏÏŒÎ½Î¿Ï‚."; pe.innerText = "ğŸš¨ ÎœÎ•Î“Î‘Î›Î— Î¤Î™ÎœÎ©Î¡Î™Î‘: ÎœÎ±Î³ÎµÎ¯ÏÎµÎ¼Î± + ÎœÎ±ÏƒÎ¬Î¶."; pe.style.background = "#ffebee"; pe.style.color = "#c62828";
        }
    }

    // --- UTILS ---
    async function sendTelegram() {
        const t = document.getElementById('tg-msg').value;
        if(!t) return showToast("Î“ÏÎ¬ÏˆÎµ ÎºÎ¬Ï„Î¹!");
        try {
            await fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendMessage`, {
                method:'POST', headers:{'Content-Type':'application/json'},
                body:JSON.stringify({chat_id:TG_CHAT, text:`Î•ÏÏÏ„Î·ÏƒÎ·: ${t}`})
            });
            showToast("Î£Ï„Î¬Î»Î¸Î·ÎºÎµ!"); document.getElementById('tg-msg').value="";
        } catch(e){ showToast("Error"); }
    }

    function showToast(m) {
        const t = document.getElementById('toast'); t.innerText=m; t.classList.add('show');
        setTimeout(()=>t.classList.remove('show'),3000);
    }
</script>

</body>
</html>
